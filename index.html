<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å¡”ç½—æ—¥è¿ Â· ä¸‰é‡æŒ‡å¼•</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Noto+Serif+SC:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Serif SC', serif;
      background: #1a0b2e url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'%3E%3Cpath d='M20,20 Q100,5 180,20 T180,180 M20,180 Q100,195 180,180' stroke='%233a2a4a' stroke-width='0.8' fill='none' opacity='0.15'/%3E%3Ccircle cx='100' cy='100' r='80' stroke='%234a355a' stroke-width='1' fill='none' opacity='0.1'/%3E%3C/svg%3E");
      color: #e8d8f0;
      line-height: 1.7;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      text-align: center;
      position: relative;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 560px;
      position: relative;
      z-index: 2;
    }

    /* æ‰€æœ‰æ­£æ–‡å†…å®¹ï¼šå¼ºåˆ¶å·¦å¯¹é½ï¼Œç¦ç”¨ justifyï¼Œä¿æŒè‡ªç„¶å­—é—´è· */
    .welcome-text,
    .instructions,
    .section-content,
    .combined-message,
    .share-prompt {
      text-align: left;
      word-break: keep-all;
      overflow-wrap: break-word;
      hyphens: none;
      orphans: 2;
      widows: 2;
      margin-left: auto;
      margin-right: auto;
    }

    /* æ ‡é¢˜ã€æŒ‰é’®ã€å¾½ç« ç­‰ä»å±…ä¸­ */
    h1,
    .result-title,
    .fortune-badge,
    .divider,
    button,
    .restart-link {
      text-align: center;
    }

    .screen {
      display: none;
      padding: 50px 30px;
      animation: fadeInBook 0.9s ease-out forwards;
    }

    .screen.active {
      display: block;
    }

    @keyframes fadeInBook {
      from { opacity: 0; transform: translateY(20px) scale(0.97); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.6em;
      margin-bottom: 25px;
      font-weight: 700;
      letter-spacing: 2px;
      color: #d4b77a;
      text-shadow: 0 0 12px rgba(160, 110, 100, 0.3);
      position: relative;
    }

    h1::after {
      content: "";
      display: block;
      width: 60px;
      height: 2px;
      background: linear-gradient(to right, transparent, #c9a968, transparent);
      margin: 12px auto 0;
    }

    .welcome-text {
      margin: 28px auto;
      font-size: 1.1em;
      line-height: 1.85;
      color: #e0c9a8;
      max-width: 480px;
      min-width: 280px;
      padding: 0 10px;
    }

    .instructions {
      margin: 24px auto;
      font-size: 1.05em;
      color: #c9a968;
      font-style: italic;
      max-width: 460px;
      line-height: 1.6;
    }

    .cards-container {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-top: 40px;
      flex-wrap: wrap;
    }

    .card-back {
      width: 80px;
      height: 130px;
      background: linear-gradient(135deg, #2c1a4d, #1a0b2e);
      border: 2px solid #8a6a9a;
      border-radius: 10px;
      cursor: pointer;
      position: relative;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
      transition: all 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card-back::before {
      content: "ğŸ‚ ";
      font-size: 32px;
      color: #c9a968;
      opacity: 0.7;
    }

    .card-back:hover {
      transform: translateY(-8px) scale(1.05);
      border-color: #c9a968;
      box-shadow: 0 8px 18px rgba(201, 169, 104, 0.3);
      background: linear-gradient(135deg, #35225a, #22123a);
    }

    .third-draw .card-back {
      border-color: #d4b77a;
      background: linear-gradient(135deg, #2a1b45, #180a28);
    }
    .third-draw .card-back::before {
      content: "ğŸƒ";
      color: #e0c9a8;
    }
    .third-draw .card-back:hover {
      transform: translateY(-10px) scale(1.08);
      box-shadow: 0 10px 22px rgba(212, 183, 122, 0.4);
    }

    @media (max-width: 480px) {
      .card-back {
        width: 70px;
        height: 115px;
      }
    }

    .result-header {
      position: relative;
      margin-bottom: 30px;
    }

    .result-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.2em;
      color: #d4b77a;
      letter-spacing: 1.5px;
      margin-bottom: 8px;
    }

    .fortune-badge {
      display: inline-block;
      padding: 8px 24px;
      background: #25143d;
      border: 1px solid #8a6a9a;
      border-radius: 30px;
      font-size: 1.15em;
      color: #e0c9a8;
      font-weight: 600;
      letter-spacing: 1px;
      margin-top: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
    }

    .divider {
      height: 1px;
      background: linear-gradient(to right, transparent, #c9a968, transparent);
      margin: 28px auto;
      width: 80%;
    }

    .result-section {
      background: rgba(30, 18, 45, 0.7);
      border: 1px solid #5a4070;
      border-radius: 16px;
      padding: 24px;
      margin: 22px 0;
      text-align: left;
    }

    .section-label {
      font-size: 1.1em;
      color: #c9a968;
      margin-bottom: 12px;
      font-weight: 600;
      letter-spacing: 1px;
      text-align: left;
    }

    .section-content,
    .combined-message {
      font-size: 1.08em;
      line-height: 1.85;
      color: #e8d8f0;
      padding: 0 12px;
    }

    .section-content p,
    .combined-message p {
      margin: 0.8em 0;
      text-align: left;
    }

    .section-content strong {
      color: #d4b77a;
      font-weight: 600;
    }

    .combined-message {
      background: rgba(20, 10, 30, 0.85);
      border-left: 4px solid #c9a968;
      padding: 20px !important;
      margin: 28px 0;
      font-style: italic;
      color: #f0e0d0;
      border-radius: 0 10px 10px 0;
    }

    .share-prompt {
      margin-top: 35px;
      font-size: 1.15em;
      color: #d4b77a;
      font-style: italic;
      line-height: 1.6;
      padding: 16px;
      background: rgba(15, 8, 25, 0.6);
      border-radius: 12px;
      border: 1px dashed #5a4070;
      text-align: left;
    }

    .share-prompt::before,
    .share-prompt::after {
      content: "âœ¦";
      margin: 0 8px;
      color: #c9a968;
    }

    button {
      margin: 32px auto 0;
      padding: 16px 0;
      width: 80%;
      background: linear-gradient(135deg, #5a4070, #25143d);
      color: #e8d8f0;
      border: 1px solid #8a6a9a;
      border-radius: 30px;
      font-size: 1.12em;
      cursor: pointer;
      transition: all 0.35s;
      font-family: 'Noto Serif SC', serif;
      letter-spacing: 1.2px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
      display: block;
    }

    button:hover:not(:disabled) {
      background: linear-gradient(135deg, #6a5080, #35244d);
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.6);
      border-color: #a080b0;
    }

    .restart-link {
      display: block;
      margin: 30px auto 0;
      color: #c9a968;
      text-decoration: none;
      font-size: 1.1em;
      font-style: italic;
      letter-spacing: 1px;
      width: fit-content;
    }

    .restart-link:hover {
      text-decoration: underline;
      color: #d4b77a;
    }

    #particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #c9a968;
      border-radius: 50%;
      opacity: 0;
      pointer-events: none;
    }

    @media (max-width: 380px) {
      h1 {
        font-size: 2.2em;
      }
      .welcome-text {
        font-size: 1.05em;
        line-height: 1.8;
      }
      .section-content,
      .combined-message {
        font-size: 1em;
        line-height: 1.75;
        padding: 0 10px;
      }
      .result-title {
        font-size: 1.9em;
      }
    }
  </style>
</head>
<body>
  <div id="particles"></div>
  
  <div class="container">
    <!-- æ¬¢è¿é¡µ -->
    <div id="welcome" class="screen active">
      <h1>å¡”ç½—æ—¥è¿ Â· ä¸‰é‡æŒ‡å¼•</h1>
      <div class="welcome-text">
        æ¬¢è¿ä½ æ¥åˆ°è¿™é‡Œã€‚<br><br>
        è¿™ä¸‰å¼ ç‰Œä¸æ˜¯é¢„è¨€ï¼Œè€Œæ˜¯æ˜ ç…§ä½ å†…å¿ƒçš„é•œå­â€”â€”å¸®åŠ©ä½ çœ‹è§è¡ŒåŠ¨çš„æ–¹å‘ã€æƒ…ç»ªçš„æš—æµï¼Œä»¥åŠå®‡å®™æ‚„æ‚„èµ äºˆçš„ç¥ç¦ã€‚<br><br>
        è¯·å¸¦ç€å¥½å¥‡ä¸æ¸©æŸ”å‚ä¸ï¼Œä½†è®°å¾—ï¼š<strong>çœŸæ­£çš„åŠ›é‡ï¼Œå§‹ç»ˆåœ¨ä½ å¿ƒä¸­ã€‚</strong><br><br>
        å¡”ç½—æ˜¯å·¥å…·ï¼Œä¸æ˜¯ç­”æ¡ˆã€‚æ„¿ä½ ç”¨å®ƒç…§è§è‡ªå·±ï¼Œè€Œéä¾èµ–å®ƒä»£æ›¿é€‰æ‹©ã€‚<br>
        æ¯æ—¥ä¸€æ¬¡ï¼Œå·²æ˜¯è¶³å¤Ÿã€‚
      </div>
      <button onclick="startStage('first')">å¼€å¯ä»Šæ—¥æŒ‡å¼•</button>
    </div>

    <!-- ç¬¬ä¸€æŠ½ï¼šå¤–åœ¨è¡ŒåŠ¨ -->
    <div id="firstDraw" class="screen">
      <h1>ç¬¬ä¸€é‡ Â· è¡ŒåŠ¨ä¹‹ç‰Œ</h1>
      <div class="instructions">å“ªä¸€å¼ åœ¨æé†’ä½ ä»Šæ—¥è¯¥è¿ˆå‡ºçš„ä¸€æ­¥ï¼Ÿ</div>
      <div class="cards-container" id="firstCards"></div>
    </div>

    <!-- ç¬¬äºŒæŠ½ï¼šå†…åœ¨æ„Ÿå— -->
    <div id="secondDraw" class="screen">
      <h1>ç¬¬äºŒé‡ Â· å¿ƒçµä¹‹ç‰Œ</h1>
      <div class="instructions">å“ªä¸€å¼ åœ¨è½»æŠšä½ ä»Šæ—¥çš„æƒ…ç»ªæš—æµï¼Ÿ</div>
      <div class="cards-container" id="secondCards"></div>
    </div>

    <!-- ç¬¬ä¸‰æŠ½ï¼šé«˜ç»´ç¥ç¦ -->
    <div id="thirdDraw" class="screen third-draw">
      <h1>ç¬¬ä¸‰é‡ Â· ç¥ç¦ä¹‹ç‰Œ</h1>
      <div class="instructions">å“ªä¸€å¼ æ­£ä¸ºä½ æ´’ä¸‹æ˜Ÿå…‰ï¼Ÿ</div>
      <div class="cards-container" id="thirdCards"></div>
    </div>

    <!-- ç»“æœé¡µ -->
    <div id="combinedResult" class="screen">
      <div class="result-header">
        <div class="result-title">ä»Šæ—¥ä¸‰é‡æŒ‡å¼•</div>
        <div class="fortune-badge" id="overallFortune"></div>
      </div>

      <div class="result-section">
        <div class="section-label">ğŸš¶â€â™€ï¸ è¡ŒåŠ¨ä¹‹ç‰Œ Â· å¤–åœ¨è¯¾é¢˜</div>
        <div class="section-content" id="actionContent"></div>
      </div>

      <div class="result-section">
        <div class="section-label">ğŸŒŠ å¿ƒçµä¹‹ç‰Œ Â· å†…åœ¨çŠ¶æ€</div>
        <div class="section-content" id="emotionContent"></div>
      </div>

      <div class="result-section">
        <div class="section-label">âœ¨ ç¥ç¦ä¹‹ç‰Œ Â· é«˜ç»´é¦ˆèµ </div>
        <div class="section-content" id="blessingContent"></div>
      </div>

      <div class="divider"></div>

      <div class="combined-message" id="combinedMessage"></div>

      <div class="share-prompt">
        è‹¥æœ‰æ‰€æ„Ÿï¼Œä¸å¦¨å°†è¿™ä»½æŒ‡å¼•åˆ†äº«ç»™éœ€è¦çš„äººã€‚
      </div>

      <a href="#" class="restart-link" onclick="restart()">é‡æ–°å¼€å§‹</a>
    </div>
  </div>

  <script>
    // å®Œæ•´22å¼ å¤§é˜¿å°”å¡çº³ç‰Œæ•°æ®ï¼ˆæŒ‰ä¼ ç»Ÿé¡ºåºï¼‰
    const tarotCards = [
      {
        name: "æ„šè€…",
        action: "å‹‡æ•¢å°è¯•æ–°äº‹ç‰©ï¼Œæ”¾ä¸‹è¿‡åº¦æ€è™‘ï¼Œä¿¡ä»»æ—…ç¨‹çš„å¼€å§‹ã€‚",
        emotion: "å†…å¿ƒå……æ»¡å¥½å¥‡ä¸è‡ªç”±ï¼Œä½†ä¹Ÿéœ€è­¦æƒ•ç›²ç›®å†²åŠ¨ã€‚",
        blessing: "å®‡å®™æ”¯æŒä½ çš„æ¢ç´¢ï¼Œä¿æŒå¤©çœŸå³æ˜¯åŠ›é‡ã€‚"
      },
      {
        name: "é­”æœ¯å¸ˆ",
        action: "å–„ç”¨ä½ æ‰‹å¤´çš„èµ„æºï¼Œä¸»åŠ¨åˆ›é€ æ”¹å˜ã€‚",
        emotion: "ä½ æ‹¥æœ‰å°†æƒ³æ³•å˜ä¸ºç°å®çš„èƒ½åŠ›ï¼Œè¯·ç›¸ä¿¡è‡ªå·±ã€‚",
        blessing: "å¤©åœ°èƒ½é‡ä¸ºä½ æ‰€ç”¨ï¼Œä¸“æ³¨å³èƒ½æ˜¾åŒ–ã€‚"
      },
      {
        name: "å¥³ç¥­å¸",
        action: "å€¾å¬ç›´è§‰ï¼Œæš‚åœè¡ŒåŠ¨ï¼Œå…ˆå‘å†…çœ‹ã€‚",
        emotion: "æƒ…ç»ªæ·±é‚ƒè€Œæ•æ„Ÿï¼Œç§˜å¯†æ­£åœ¨æµ®ç°ã€‚",
        blessing: "ä½ è¢«èµ‹äºˆæ´å¯ŸçœŸç›¸çš„èƒ½åŠ›ï¼Œè¯·ä¿¡ä»»å†…åœ¨å£°éŸ³ã€‚"
      },
      {
        name: "çš‡å",
        action: "æ»‹å…»è‡ªå·±ä¸ä»–äººï¼Œå…³æ³¨èº«ä½“ä¸åˆ›é€ åŠ›çš„éœ€æ±‚ã€‚",
        emotion: "ä¸°ç››ä¸æ¸©æŸ”ç¯ç»•ä½ ï¼Œå…è®¸è‡ªå·±è¢«çˆ±ã€‚",
        blessing: "å¤§åœ°æ¯äº²æ­£ä»¥ä¸°é¥¶å›åº”ä½ çš„ä»˜å‡ºã€‚"
      },
      {
        name: "çš‡å¸",
        action: "å»ºç«‹ç»“æ„ï¼Œæ‰¿æ‹…è´£ä»»ï¼Œåšå‡ºåšå®šå†³å®šã€‚",
        emotion: "ä½ éœ€è¦ç§©åºä¸æŒæ§æ„Ÿï¼Œè¯·å±•ç°é¢†å¯¼åŠ›ã€‚",
        blessing: "æƒå¨ä¸ç¨³å®šæ˜¯ä½ ä»Šæ—¥çš„æŠ¤ç›¾ã€‚"
      },
      {
        name: "æ•™çš‡",
        action: "å¯»æ±‚æŒ‡å¯¼æˆ–ä¼ ç»Ÿæ™ºæ…§ï¼Œå°Šé‡è§„åˆ™ä¸ä»ªå¼ã€‚",
        emotion: "ä½ æ¸´æœ›å½’å±ä¸æ„ä¹‰ï¼Œä¿¡ä»°å¸¦æ¥å®‰å¿ƒã€‚",
        blessing: "æ›´é«˜æ™ºæ…§æ­£é€šè¿‡å¯¼å¸ˆæˆ–ä¼ ç»Ÿå‘ä½ ä½è¯­ã€‚"
      },
      {
        name: "æ‹äºº",
        action: "åšå‡ºå¿ äºå†…å¿ƒçš„é€‰æ‹©ï¼Œé‡è§†å…³ç³»ä¸­çš„çœŸè¯šã€‚",
        emotion: "çˆ±ä¸è¿æ¥æ˜¯ä»Šæ—¥ä¸»é¢˜ï¼Œå’Œè°æ¥è‡ªçœŸå®ã€‚",
        blessing: "å®‡å®™ç¥ç¦ä½ çš„é€‰æ‹©ï¼Œæ— è®ºå…³ä¹äººæˆ–äº‹ã€‚"
      },
      {
        name: "æˆ˜è½¦",
        action: "åšå®šå‰è¡Œï¼Œé©¾é©­çŸ›ç›¾ï¼Œä»¥æ„å¿—åŠ›çªç ´éšœç¢ã€‚",
        emotion: "å†…åœ¨å†²çªå­˜åœ¨ï¼Œä½†ä½ èƒ½æ•´åˆå¯¹ç«‹é¢ã€‚",
        blessing: "èƒœåˆ©å±äºåšæŒæ–¹å‘è€Œä¸å¤±æ§çš„äººã€‚"
      },
      {
        name: "åŠ›é‡",
        action: "ä»¥æŸ”å…‹åˆšï¼Œç”¨è€å¿ƒå’ŒåŒç†å¿ƒé¢å¯¹æŒ‘æˆ˜ã€‚",
        emotion: "ä½ æ‹¥æœ‰æ¯”æƒ³è±¡ä¸­æ›´å¼ºçš„å†…åœ¨éŸ§æ€§ã€‚",
        blessing: "å‹‡æ°”ä¸æ…ˆæ‚²åŒåœ¨ï¼Œè¿™æ˜¯ä½ æœ€å¼ºå¤§çš„æ—¶åˆ»ã€‚"
      },
      {
        name: "éšå£«",
        action: "ç‹¬å¤„åæ€ï¼Œå¯»æ‰¾å±äºè‡ªå·±çš„ç­”æ¡ˆã€‚",
        emotion: "æ„Ÿåˆ°å­¤ç‹¬ï¼Œä½†è¿™æ˜¯æ™ºæ…§æ²‰æ·€çš„å¿…ç»ä¹‹è·¯ã€‚",
        blessing: "ç¯å·²ç‚¹äº®ï¼Œä½ ç»ˆå°†ç…§äº®è‡ªå·±çš„æ–¹å‘ã€‚"
      },
      {
        name: "å‘½è¿ä¹‹è½®",
        action: "é¡ºåŠ¿è€Œä¸ºï¼Œæ¥å—å˜åŒ–å¸¦æ¥çš„è½¬æœºã€‚",
        emotion: "ä¸–äº‹æ— å¸¸ï¼Œä½†æ¯ä¸€æ¬¡è½¬åŠ¨éƒ½å¸¦æ¥æ–°å¯èƒ½ã€‚",
        blessing: "å¥½è¿æ­£åœ¨é è¿‘ï¼Œä¿æŒå¼€æ”¾çš„å¿ƒã€‚"
      },
      {
        name: "æ­£ä¹‰",
        action: "æƒè¡¡åˆ©å¼Šï¼Œåšå‡ºå…¬å¹³ä¸”è¯šå®çš„å†³å®šã€‚",
        emotion: "ä½ æ¸´æœ›å¹³è¡¡ä¸å› æœçš„æ¸…æ™°ï¼Œè¯·æ­£è§†çœŸç›¸ã€‚",
        blessing: "å®‡å®™æ”¯æŒä½ å›å½’æ­£é“ï¼Œä¸šåŠ›æ­£åœ¨æ ¡å‡†ã€‚"
      },
      {
        name: "å€’åŠäºº",
        action: "æš‚åœã€ç‰ºç‰²çŸ­æœŸåˆ©ç›Šï¼Œæ¢ä¸€ä¸ªè§’åº¦çœ‹é—®é¢˜ã€‚",
        emotion: "çœ‹ä¼¼å—é™ï¼Œå®åˆ™æ˜¯è½¬åŒ–çš„å¿…è¦é˜¶æ®µã€‚",
        blessing: "æ”¾æ‰‹å³è·å¾—ï¼Œè§†è§’è½¬æ¢å¸¦æ¥é¡¿æ‚Ÿã€‚"
      },
      {
        name: "æ­»ç¥",
        action: "ç»“æŸæ—§æ¨¡å¼ï¼Œå‹‡æ•¢å‘Šåˆ«ä¸å†æœåŠ¡ä½ çš„äº‹ç‰©ã€‚",
        emotion: "è½¬å˜å¸¦æ¥é˜µç—›ï¼Œä½†é‡ç”Ÿå·²åœ¨è·¯ä¸Šã€‚",
        blessing: "æ­»äº¡æ˜¯å¹»è±¡ï¼Œæ–°ç”Ÿæ­£æ‚„ç„¶èŒèŠ½ã€‚"
      },
      {
        name: "èŠ‚åˆ¶",
        action: "è°ƒå’ŒçŸ›ç›¾ï¼Œå¯»æ‰¾ä¸­åº¸ä¹‹é“ï¼Œè€å¿ƒèåˆã€‚",
        emotion: "å†…åœ¨èŠ‚å¥éœ€è¦æ ¡å‡†ï¼Œè¯·ç»ƒä¹ å¹³è¡¡ã€‚",
        blessing: "å¤©ä½¿æ­£å¼•å¯¼ä½ èµ°å‘å’Œè°ä¸ç–—æ„ˆã€‚"
      },
      {
        name: "æ¶é­”",
        action: "å®¡è§†æŸç¼šä½ çš„æ¬²æœ›æˆ–ä¹ æƒ¯ï¼Œå¤ºå›è‡ªç”±ã€‚",
        emotion: "ææƒ§ä¸æ‰§å¿µæµ®ç°ï¼Œè¯·çœ‹æ¸…å®ƒä»¬çš„è™šå¹»ã€‚",
        blessing: "è§‰å¯Ÿå³è§£è„±ï¼Œä½ æœ¬å°±æ‹¥æœ‰æŒ£è„±çš„åŠ›é‡ã€‚"
      },
      {
        name: "é«˜å¡”",
        action: "æ¥å—çªå¦‚å…¶æ¥çš„é¢ è¦†ï¼Œé‡å»ºæ›´åšå®çš„åŸºç¡€ã€‚",
        emotion: "éœ‡æƒŠä¸æ··ä¹±æ˜¯æš‚æ—¶çš„ï¼ŒçœŸç›¸ç»ˆå°†è§£æ”¾ä½ ã€‚",
        blessing: "å´©å¡Œæ˜¯ä¸ºäº†æ¸…é™¤è™šå‡ï¼Œè®©å…‰è¿›å…¥ã€‚"
      },
      {
        name: "æ˜Ÿæ˜Ÿ",
        action: "æ€€æŠ±å¸Œæœ›ï¼Œè®¾å®šæ„¿æ™¯ï¼Œå°æ­¥å‘å‰ã€‚",
        emotion: "å¿ƒçµè¢«ç–—æ„ˆï¼Œçµæ„Ÿå¦‚æ˜Ÿå…‰æ´’è½ã€‚",
        blessing: "å®‡å®™æ­£ä»¥æ¸©æŸ”å®ˆæŠ¤ä½ çš„æ¢¦æƒ³ã€‚"
      },
      {
        name: "æœˆäº®",
        action: "è­¦æƒ•å¹»è§‰ï¼ŒåŒºåˆ†ç›´è§‰ä¸ææƒ§ã€‚",
        emotion: "æ½œæ„è¯†æ¶ŒåŠ¨ï¼Œæ¢¦å¢ƒæˆ–æš—ç¤ºå€¼å¾—å…³æ³¨ã€‚",
        blessing: "ç©¿è¶Šè¿·é›¾åï¼Œä½ å°†è·å¾—æ·±å±‚æ™ºæ…§ã€‚"
      },
      {
        name: "å¤ªé˜³",
        action: "å°½æƒ…å±•ç°æ´»åŠ›ï¼Œäº«å—æˆåŠŸä¸æ¸…æ™°ã€‚",
        emotion: "å–œæ‚¦ã€è‡ªä¿¡ä¸å…‰æ˜å……æ»¡ä½ çš„å¿ƒã€‚",
        blessing: "ä¸€åˆ‡é¡ºåˆ©ï¼Œå®‡å®™ä¸ºä½ å–å½©ã€‚"
      },
      {
        name: "å®¡åˆ¤",
        action: "å›åº”å†…å¿ƒçš„å¬å”¤ï¼Œåšå‡ºè§‰é†’çš„å†³å®šã€‚",
        emotion: "ä½ æ­£ç»å†é‡ç”Ÿï¼Œè¯·æ‹¥æŠ±æ–°çš„èº«ä»½ã€‚",
        blessing: "è¿‡å»å·²èµ¦å…ï¼Œæœªæ¥æ­£å¬å”¤ä½ ã€‚"
      },
      {
        name: "ä¸–ç•Œ",
        action: "åº†ç¥å®Œæˆï¼Œæ•´åˆç»éªŒï¼Œå‡†å¤‡æ–°å¾ªç¯ã€‚",
        emotion: "åœ†æ»¡ä¸æˆå°±å¸¦æ¥æ·±å±‚æ»¡è¶³æ„Ÿã€‚",
        blessing: "ä½ å·²æŠµè¾¾ä¸€ä¸ªç»ˆç‚¹ï¼Œä¹Ÿæ˜¯å…¨ç„¶çš„æ–°èµ·ç‚¹ã€‚"
      }
    ];

    let selections = {};

    function startStage(stage) {
      hideAllScreens();
      document.getElementById(stage + 'Draw').classList.add('active');
      renderCards(stage);
    }

    function hideAllScreens() {
      document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
    }

    function shuffleArray(array) {
      return [...array].sort(() => Math.random() - 0.5);
    }

    function renderCards(stage) {
      const container = document.getElementById(stage + 'Cards');
      container.innerHTML = '';
      // ä»22å¼ ä¸­éšæœºé€‰3å¼ ï¼ˆå…è®¸é‡å¤å‡ºç°åœ¨ä¸åŒè½®æ¬¡ï¼‰
      const shuffled = shuffleArray(tarotCards).slice(0, 3);
      shuffled.forEach(card => {
        const cardEl = document.createElement('div');
        cardEl.className = 'card-back';
        cardEl.onclick = () => selectCard(stage, card);
        container.appendChild(cardEl);
      });
    }

    function selectCard(stage, card) {
      selections[stage] = card;
      if (stage === 'first') {
        startStage('second');
      } else if (stage === 'second') {
        startStage('third');
      } else if (stage === 'third') {
        showResult();
      }
    }

    function preventOrphans(str) {
      return str.replace(/(\S+)\s+(\S+)$/g, '$1&nbsp;$2');
    }

    function showResult() {
      const action = selections.first;
      const emotion = selections.second;
      const blessing = selections.third;

      // ç»¼åˆè¿åŠ¿åˆ¤æ–­ï¼ˆç®€åŒ–ï¼šæ ¹æ®ç‰Œçš„ç§¯æç¨‹åº¦ï¼‰
      const positiveCards = ['é­”æœ¯å¸ˆ','çš‡å','æ‹äºº','æˆ˜è½¦','åŠ›é‡','å‘½è¿ä¹‹è½®','èŠ‚åˆ¶','æ˜Ÿæ˜Ÿ','å¤ªé˜³','ä¸–ç•Œ'];
      const count = [action, emotion, blessing].filter(c => positiveCards.includes(c.name)).length;
      let fortuneText = count >= 2 ? 'å‰æ˜Ÿé«˜ç…§ ğŸŒŸ' : count === 1 ? 'ç¨³ä¸­æœ‰è¿› âš–ï¸' : 'é™å¾…è½¬æœº ğŸŒ±';

      document.getElementById('overallFortune').textContent = fortuneText;

      // æ¸²æŸ“å†…å®¹ï¼ˆåº”ç”¨é˜²å­¤å­—ï¼‰
      document.getElementById('actionContent').innerHTML = `<p>${preventOrphans(action.action)}</p>`;
      document.getElementById('emotionContent').innerHTML = `<p>${preventOrphans(emotion.emotion)}</p>`;
      document.getElementById('blessingContent').innerHTML = `<p>${preventOrphans(blessing.blessing)}</p>`;

      // ç»¼åˆä¿¡æ¯
      const combined = `ä»Šæ—¥ï¼Œ${action.name}å¼•é¢†ä½ è¡ŒåŠ¨ï¼Œ${emotion.name}æ˜ ç…§ä½ å†…å¿ƒï¼Œè€Œ${blessing.name}ä¸ºä½ åŠ å†•ã€‚ä¸‰è€…äº¤ç»‡ï¼Œå½¢æˆç‹¬ç‰¹èƒ½é‡åœºï¼šå¤–åœ¨éœ€${action.name === 'éšå£«' || action.name === 'å€’åŠäºº' ? 'å†…çœ' : 'å‰è¡Œ'}ï¼Œå†…åœ¨å®œ${emotion.name === 'åŠ›é‡' || emotion.name === 'å¤ªé˜³' ? 'åšå®š' : 'æµåŠ¨'}ï¼Œå®‡å®™æ­£ä»¥${blessing.name}çš„æ–¹å¼é»˜é»˜æŠ¤æŒä½ ã€‚`;
      document.getElementById('combinedMessage').innerHTML = `<p>${preventOrphans(combined)}</p>`;

      hideAllScreens();
      document.getElementById('combinedResult').classList.add('active');
    }

    function restart() {
      selections = {};
      hideAllScreens();
      document.getElementById('welcome').classList.add('active');
    }

    // ç²’å­èƒŒæ™¯
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      for (let i = 0; i < 50; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.left = Math.random() * 100 + '%';
        p.style.top = Math.random() * 100 + '%';
        p.style.opacity = Math.random() * 0.6 + 0.1;
        p.style.width = (Math.random() * 3 + 2) + 'px';
        p.style.height = p.style.width;
        particlesContainer.appendChild(p);

        const duration = Math.random() * 10 + 10;
        p.animate([
          { transform: 'translate(0, 0)', opacity: 0 },
          { transform: `translate(${(Math.random() - 0.5) * 100}px, ${(Math.random() - 0.5) * 100}px)`, opacity: 0.6 },
          { transform: `translate(${(Math.random() - 0.5) * 200}px, ${(Math.random() - 0.5) * 200}px)`, opacity: 0 }
        ], {
          duration: duration * 1000,
          iterations: Infinity,
          easing: 'linear'
        });
      }
    }

    window.onload = () => {
      createParticles();
    };
  </script>
</body>
</html>
