<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å¡”ç½—æ—¥è¿</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Noto+Serif+SC:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Serif SC', serif;
      background: #1a0b2e url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'%3E%3Cpath d='M20,20 Q100,5 180,20 T180,180 M20,180 Q100,195 180,180' stroke='%233a2a4a' stroke-width='0.8' fill='none' opacity='0.15'/%3E%3Ccircle cx='100' cy='100' r='80' stroke='%234a355a' stroke-width='1' fill='none' opacity='0.1'/%3E%3C/svg%3E");
      color: #e8d8f0;
      line-height: 1.7;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      text-align: center;
      position: relative;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 560px;
      position: relative;
      z-index: 2;
    }

    /* â€”â€”â€”â€”â€”â€” å…¨å±€ä¸­æ–‡æ’ç‰ˆä¼˜åŒ– â€”â€”â€”â€”â€”â€” */
    .container,
    .poem,
    .instructions,
    .section-content,
    .combined-message,
    .share-prompt {
      word-break: keep-all;
      overflow-wrap: break-word;
      hyphens: auto;
      -webkit-hyphens: auto;
      -ms-hyphens: auto;
    }

    .screen {
      display: none;
      padding: 50px 30px;
      animation: fadeInBook 0.9s ease-out forwards;
    }

    .screen.active {
      display: block;
    }

    @keyframes fadeInBook {
      from { opacity: 0; transform: translateY(20px) scale(0.97); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.6em;
      margin-bottom: 25px;
      font-weight: 700;
      letter-spacing: 2px;
      color: #d4b77a;
      text-shadow: 0 0 12px rgba(160, 110, 100, 0.3);
      position: relative;
    }

    h1::after {
      content: "";
      display: block;
      width: 60px;
      height: 2px;
      background: linear-gradient(to right, transparent, #c9a968, transparent);
      margin: 12px auto 0;
    }

    /* â€”â€”â€”â€” è¯—æ­Œå¼å¼•å¯¼æ–‡æ¡ˆï¼ˆé˜²å­¤å­—ä¼˜åŒ–ï¼‰ â€”â€”â€”â€” */
    .poem {
      margin: 28px auto;
      font-size: 1.15em;
      line-height: 1.9;
      color: #e0c9a8;
      max-width: 480px;
      font-style: italic;
      text-align: center;
      min-width: 280px; /* é˜²æ­¢æçª„å±æ¯è¡Œä»…1-2å­— */
    }

    .poem-line {
      display: block;
      margin: 8px 0;
      word-break: break-word;
    }

    /* ä¿æŠ¤å…³é”®çŸ­è¯­ä¸è¢«æ‹†å¼€ */
    .nowrap {
      white-space: nowrap;
    }

    .instructions {
      margin: 24px auto;
      font-size: 1.05em;
      color: #c9a968;
      font-style: italic;
      max-width: 460px;
      line-height: 1.6;
    }

    /* â€”â€”â€”â€”â€”â€” æŠ½ç‰Œé¡µï¼šå¡ç‰‡å®¹å™¨ä¸ç‰ŒèƒŒæ ·å¼ â€”â€”â€”â€”â€”â€” */
    .cards-container {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-top: 40px;
      flex-wrap: wrap;
    }

    .card-back {
      width: 80px;
      height: 130px;
      background: linear-gradient(135deg, #2c1a4d, #1a0b2e);
      border: 2px solid #8a6a9a;
      border-radius: 10px;
      cursor: pointer;
      position: relative;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
      transition: all 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card-back::before {
      content: "ğŸ‚ ";
      font-size: 32px;
      color: #c9a968;
      opacity: 0.7;
    }

    .card-back:hover {
      transform: translateY(-8px) scale(1.05);
      border-color: #c9a968;
      box-shadow: 0 8px 18px rgba(201, 169, 104, 0.3);
      background: linear-gradient(135deg, #35225a, #22123a);
    }

    @media (max-width: 480px) {
      .card-back {
        width: 70px;
        height: 115px;
      }
    }

    /* â€”â€”â€”â€”â€”â€” ç»“æœé¡µ â€”â€”â€”â€”â€”â€” */
    .result-header {
      position: relative;
      margin-bottom: 30px;
    }

    .result-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.2em;
      color: #d4b77a;
      letter-spacing: 1.5px;
      margin-bottom: 8px;
    }

    .fortune-badge {
      display: inline-block;
      padding: 8px 24px;
      background: #25143d;
      border: 1px solid #8a6a9a;
      border-radius: 30px;
      font-size: 1.15em;
      color: #e0c9a8;
      font-weight: 600;
      letter-spacing: 1px;
      margin-top: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
    }

    .divider {
      height: 1px;
      background: linear-gradient(to right, transparent, #c9a968, transparent);
      margin: 28px 0;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
    }

    .result-section {
      background: rgba(30, 18, 45, 0.7);
      border: 1px solid #5a4070;
      border-radius: 16px;
      padding: 24px;
      margin: 22px 0;
      text-align: left;
      position: relative;
    }

    .section-label {
      font-size: 1.1em;
      color: #c9a968;
      margin-bottom: 12px;
      font-weight: 600;
      letter-spacing: 1px;
    }

    .section-content {
      font-size: 1.08em;
      line-height: 1.85;
      color: #e8d8f0;
      padding: 0 8px;
    }

    .section-content strong {
      color: #d4b77a;
      font-weight: 600;
    }

    .combined-message {
      background: rgba(20, 10, 30, 0.85);
      border-left: 4px solid #c9a968;
      padding: 20px;
      margin: 28px 0;
      font-style: italic;
      color: #f0e0d0;
      border-radius: 0 10px 10px 0;
    }

    .share-prompt {
      margin-top: 35px;
      font-size: 1.15em;
      color: #d4b77a;
      font-style: italic;
      line-height: 1.6;
      padding: 16px;
      background: rgba(15, 8, 25, 0.6);
      border-radius: 12px;
      border: 1px dashed #5a4070;
    }

    .share-prompt::before,
    .share-prompt::after {
      content: "âœ¦";
      margin: 0 8px;
      color: #c9a968;
    }

    button {
      margin-top: 32px;
      padding: 16px 0;
      width: 80%;
      background: linear-gradient(135deg, #5a4070, #25143d);
      color: #e8d8f0;
      border: 1px solid #8a6a9a;
      border-radius: 30px;
      font-size: 1.12em;
      cursor: pointer;
      transition: all 0.35s;
      font-family: 'Noto Serif SC', serif;
      letter-spacing: 1.2px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    }

    button:hover:not(:disabled) {
      background: linear-gradient(135deg, #6a5080, #35244d);
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.6);
      border-color: #a080b0;
    }

    .restart-link {
      display: inline-block;
      margin-top: 30px;
      color: #c9a968;
      text-decoration: none;
      font-size: 1.1em;
      font-style: italic;
      letter-spacing: 1px;
    }

    .restart-link:hover {
      text-decoration: underline;
      color: #d4b77a;
    }

    #particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #c9a968;
      border-radius: 50%;
      opacity: 0;
      pointer-events: none;
    }

    /* â€”â€”â€”â€”â€”â€” å“åº”å¼å¾®è°ƒï¼ˆå°å±æ›´èˆ’é€‚ï¼‰ â€”â€”â€”â€”â€”â€” */
    @media (max-width: 380px) {
      h1 {
        font-size: 2.2em;
      }
      .poem {
        font-size: 1.05em;
        line-height: 1.8;
      }
      .section-content,
      .combined-message {
        font-size: 1em;
        line-height: 1.75;
      }
      .result-title {
        font-size: 1.9em;
      }
    }
  </style>
</head>
<body>
  <div id="particles"></div>
  
  <div class="container">
    <div id="welcome" class="screen active">
      <h1>å¡”ç½—æ—¥è¿</h1>
      <div class="poem">
        <span class="poem-line">æ˜Ÿæ²³æµè½¬ï¼Œç‰Œé¢åªä¸ºä½ <span class="nowrap">æ˜¾å½±ä¸€æ¬¡</span></span>
        <span class="poem-line">å¿ƒæœ‰æ‰€é—®ï¼Œä¾¿<span class="nowrap">è½»è½»ä¸€è§¦</span></span>
        <span class="poem-line">å¡”ç½—æ˜¯æ˜ ç…§å†…å¿ƒçš„é•œï¼Œ<span class="nowrap">è€Œéé¢„è¨€çš„å·¥å…·</span></span>
        <span class="poem-line">æ¯æ—¥æœ€å¤šæŠ½å–ä¸‰æ¬¡ï¼Œè®©ç­”æ¡ˆ<span class="nowrap">åœ¨é™é»˜ä¸­ç”Ÿé•¿</span></span>
        <span class="poem-line">åˆ«æ€¥ç€è¿½é—®æœªæ¥â€”â€”<span class="nowrap">ä½ æ­¤åˆ»çš„è§‰å¯Ÿï¼Œå·²æ˜¯å…‰</span></span>
      </div>
      <button onclick="startShuffle('first')">å¼€å¯ä»Šæ—¥æŒ‡å¼•</button>
    </div>

    <div id="firstDraw" class="screen">
      <h1>æ‹©ä¸€ç‰Œ</h1>
      <div class="instructions">å“ªä¸€å¼ åœ¨å‘¼å”¤ä½ çš„åå­—ï¼Ÿ</div>
      <div class="cards-container" id="firstCards"></div>
    </div>

    <div id="secondDraw" class="screen">
      <h1>å†æ‹©ä¸€ç‰Œ</h1>
      <div class="instructions">è®©èƒ½é‡å®Œæ•´æµåŠ¨</div>
      <div class="cards-container" id="secondCards"></div>
    </div>

    <div id="combinedResult" class="screen">
      <div class="result-header">
        <div class="result-title">ä»Šæ—¥å¡”ç½—æŒ‡å¼•</div>
        <div class="fortune-badge" id="overallFortune"></div>
      </div>

      <div class="result-section">
        <div class="section-label">âœ¨ æ˜¾åŒ–ä¹‹ç‰Œ</div>
        <div class="section-content" id="mainCardText"></div>
      </div>

      <div class="result-section">
        <div class="section-label">ğŸŒ™ æ½œæµä¹‹ç‰Œ</div>
        <div class="section-content" id="supportCardText"></div>
      </div>

      <div class="divider"></div>

      <div class="combined-message" id="combinedMessage"></div>

      <div class="share-prompt">
        ç‰Œé¢åªä¸ºä½ æ˜¾ç°ã€‚<br>
        è‹¥ä½ æ„¿æ„åˆ†äº«ï¼Œå…‰ä¾¿å¤šç…§ä¸€äººã€‚
      </div>

      <a href="#" class="restart-link" onclick="showScreen('welcome'); return false;">
        æ˜æ—¥å†æ¥ã€‚
      </a>
    </div>
  </div>

  <script>
    // â€”â€”â€”â€”â€”â€” é¡µé¢åˆ‡æ¢å·¥å…·å‡½æ•° â€”â€”â€”â€”â€”â€”
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
      document.getElementById(screenId).classList.add('active');
    }

    // ç²’å­åŠ¨æ•ˆ
    const particlesContainer = document.getElementById('particles');
    function createParticles(x, y) {
      const colors = ['#c9a968', '#d4b77a', '#a68560'];
      for (let i = 0; i < 12; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        particlesContainer.appendChild(particle);

        const angle = Math.random() * Math.PI * 2;
        const speed = 70 + Math.random() * 100;
        const vx = Math.cos(angle) * speed;
        const vy = Math.sin(angle) * speed;

        let opacity = 1;
        let size = 2 + Math.random() * 3;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';

        const startTime = performance.now();
        const animate = (currentTime) => {
          const elapsed = (currentTime - startTime) / 1000;
          const progress = Math.min(elapsed / 1.2, 1);
          const currentX = x + vx * elapsed;
          const currentY = y + vy * elapsed;
          opacity = 1 - progress;
          particle.style.opacity = opacity;
          particle.style.transform = `translate(${currentX - x}px, ${currentY - y}px)`;
          if (opacity > 0) {
            requestAnimationFrame(animate);
          } else {
            particle.remove();
          }
        };
        requestAnimationFrame(animate);
      }
    }

    const tarotCards = [
      { name: "æ„šè€…", symbol: "ğŸƒ", fortuneLevel: 3, insight: "å¯ç¨‹", text: "ä»Šæ—¥å®œè¿ˆå‡ºé‚£ä¸€æ­¥â€”â€”å“ªæ€•æ²¡æœ‰åœ°å›¾ã€‚<br><br>å®‡å®™æ­£ä¸ºä½ é“ºä¸€æ¡çœ‹ä¸è§çš„è·¯ï¼Œåªéœ€ç›¸ä¿¡è„šä¸‹çš„åœŸåœ°ã€‚<br><br>æ­¤åˆ»ä¸å¦¨å†™ä¸‹ä¸€ä»¶ä½ æƒ³å°è¯•å´çŠ¹è±«çš„äº‹ï¼Œç„¶åå¯¹å®ƒè½»å£°è¯´ï¼šâ€œæˆ‘é™ªä½ ã€‚â€" },
      { name: "é­”æœ¯å¸ˆ", symbol: "âš¡", fortuneLevel: 3, insight: "æ˜¾åŒ–", text: "ä½ æ‹¥æœ‰æ‰€éœ€çš„ä¸€åˆ‡èµ„æºï¼Œå°±åœ¨æ‰‹è¾¹ã€‚<br><br>ä»Šæ—¥ï¼Œä½ çš„æ„å›¾ä¼šå¿«é€Ÿæˆå½¢ï¼Œè¯·æ¸…æ™°åœ°è¯´å‡ºä½ æƒ³è¦ä»€ä¹ˆã€‚<br><br>æ•´ç†æ¡Œé¢ï¼ŒæŠŠä¸‰æ ·å¸¸ç”¨ç‰©å“æ‘†æˆä¸‰è§’â€”â€”è¿™æ˜¯ä½ çš„èƒ½é‡é˜µã€‚" },
      { name: "å¥³ç¥­å¸", symbol: "ğŸŒ™", fortuneLevel: 2, insight: "ç›´è§‰", text: "å†…å¿ƒæœ‰ä¸ªè½»æŸ”çš„å£°éŸ³ï¼Œè¯·å¤šå¬å®ƒä¸€ä¼šå„¿ã€‚<br><br>ç­”æ¡ˆä¸åœ¨è¿œæ–¹ï¼Œè€Œåœ¨ä½ å‘¼å¸çš„é—´éš™é‡Œã€‚<br><br>é—­çœ¼ä¸‰æ¬¡æ·±å‘¼å¸ï¼Œé—®è‡ªå·±ï¼šâ€œæ­¤åˆ»ï¼Œæˆ‘çœŸæ­£éœ€è¦ä»€ä¹ˆï¼Ÿâ€" },
      { name: "çš‡å", symbol: "ğŸŒ¸", fortuneLevel: 3, insight: "æ»‹å…»", text: "ä»Šæ—¥ï¼Œè¯·åƒå¯¹å¾…æŒšå‹ä¸€æ ·å¯¹å¾…è‡ªå·±ã€‚<br><br>ä½ çš„å­˜åœ¨æœ¬èº«ï¼Œå°±æ˜¯ä¸€ç§ä¸°ç››ã€‚å…è®¸è‡ªå·±è¢«æ¸©æŸ”åŒ…å›´ã€‚<br><br>æ³¡ä¸€æ¯çƒ­é¥®ï¼ŒåŒæ‰‹æ§ä½ï¼Œæ„Ÿå—æš–æ„ä»æŒå¿ƒæµå‘å…¨èº«ã€‚" },
      { name: "çš‡å¸", symbol: "ğŸ‘‘", fortuneLevel: 2, insight: "ç¨³å®š", text: "ç»“æ„ä¸æ˜¯æŸç¼šï¼Œè€Œæ˜¯è®©ä½ å®‰å¿ƒé£ç¿”çš„æ”¯æ¶ã€‚<br><br>ä»Šæ—¥é€‚åˆè§„åˆ’ã€è®¾ç«‹è¾¹ç•Œï¼Œæˆ–å®Œæˆä¸€ä»¶æ‹–å»¶çš„å°äº‹ã€‚<br><br>å†™ä¸‹ä»Šæ—¥ä¸‰ä»¶å¿…åšå°äº‹ï¼Œå®Œæˆåè½»è½»åˆ’æ‰ï¼Œç»™è‡ªå·±ä¸€ä¸ªæ— å£°çš„æŒå£°ã€‚" },
      { name: "æ•™çš‡", symbol: "â›ª", fortuneLevel: 2, insight: "æ™ºæ…§", text: "æœ‰äººæ­£é»˜é»˜æ”¯æŒä½ ï¼Œæˆ–ä¸€æ®µæ—§çŸ¥è¯†å°†çªç„¶ç…§äº®ä½ ã€‚<br><br>å‘å†…æ±‚ï¼Œä¹Ÿå‘å¤–å­¦ï¼Œä¸¤è€…çš†æ˜¯å…‰ã€‚<br><br>é‡è¯»ä¸€æ®µæ›¾æ¿€åŠ±ä½ çš„æ–‡å­—ï¼Œè®©å®ƒå†æ¬¡æµå…¥å¿ƒé‡Œã€‚" },
      { name: "æ‹äºº", symbol: "â¤ï¸", fortuneLevel: 3, insight: "é€‰æ‹©", text: "æ— è®ºé¢å¯¹äººã€äº‹æˆ–æ–¹å‘ï¼Œå¿ äºå†…å¿ƒå°±æ˜¯æœ€å¥½çš„ç­”æ¡ˆã€‚<br><br>çˆ±ï¼Œå§‹äºå¯¹è‡ªå·±è¯šå®ã€‚<br><br>æŠŠæ‰‹æ”¾åœ¨å¿ƒå£ï¼Œè½»å£°è¯´ï¼šâ€œæˆ‘é€‰æ‹©ä½ ï¼Œæˆ‘çš„çœŸå®ã€‚â€" },
      { name: "æˆ˜è½¦", symbol: "âš”ï¸", fortuneLevel: 2, insight: "å‰è¡Œ", text: "å†…åœ¨æœ‰äº›æ‹‰æ‰¯ï¼Œä½†ä½ æœ‰èƒ½åŠ›é©¾é©­å®ƒä»¬ã€‚<br><br>ä¸å¿…å®Œç¾å¹³è¡¡ï¼Œåªè¦æ–¹å‘åšå®šï¼Œå°±èƒ½å‰è¿›ã€‚<br><br>é€‰ä¸€ä»¶æƒ³æ¨è¿›çš„äº‹ï¼Œç°åœ¨å°±åšç¬¬ä¸€æ­¥â€”â€”å“ªæ€•åªèŠ±ä¸¤åˆ†é’Ÿã€‚" },
      { name: "åŠ›é‡", symbol: "ğŸ¦", fortuneLevel: 3, insight: "æ¸©æŸ”ä¹‹åŠ›", text: "çœŸæ­£çš„å‹‡æ°”ï¼Œæ˜¯å¸¦ç€è„†å¼±ä¾ç„¶å‰è¡Œã€‚<br><br>ä½ æ¯”æƒ³è±¡ä¸­æ›´åšéŸ§ï¼Œä¹Ÿæ›´æŸ”è½¯ã€‚<br><br>å¯¹ä»Šå¤©çš„è‡ªå·±è¯´ï¼šâ€œè¾›è‹¦äº†ï¼Œä½†æˆ‘ä¸ºä½ éª„å‚²ã€‚â€" },
      { name: "éšå£«", symbol: "ğŸ•¯ï¸", fortuneLevel: 1, insight: "å†…è§‚", text: "ä»Šæ—¥é€‚åˆæ…¢ä¸‹æ¥ï¼Œç‚¹ä¸€ç›å†…åœ¨çš„ç¯ã€‚<br><br>ç‹¬å¤„ä¸æ˜¯å­¤ç‹¬ï¼Œè€Œæ˜¯ä¸è‡ªå·±é‡é€¢ã€‚<br><br>å…³æ‰å±å¹•äº”åˆ†é’Ÿï¼Œé™é™åç€ï¼Œåªé™ªè‡ªå·±ã€‚" },
      { name: "å‘½è¿ä¹‹è½®", symbol: "ğŸŒ€", fortuneLevel: 2, insight: "è½¬æœº", text: "å˜åŒ–æ­£åœ¨å‘ç”Ÿï¼Œé£å‘å·²è½¬ã€‚<br><br>æ”¾æ‰‹é‚£äº›ä¸å†æœåŠ¡ä½ çš„ï¼Œæ–°çš„å·²åœ¨è·¯ä¸Šã€‚<br><br>æ‰“å¼€çª—æˆ·ï¼Œæ·±å¸ä¸€å£æ°”ï¼Œé»˜å¿µï¼šâ€œæˆ‘æ¬¢è¿æ–°çš„å¯èƒ½ã€‚â€" },
      { name: "æ­£ä¹‰", symbol: "âš–ï¸", fortuneLevel: 2, insight: "å¹³è¡¡", text: "ä»Šæ—¥é€‚åˆåšå†³å®šã€ä¿®å¤å…³ç³»ï¼Œæˆ–ä¸ºè‡ªå·±æ­£åã€‚<br><br>å…¬æ­£ï¼Œå§‹äºå¯¹è‡ªå·±çš„å®½æ•ã€‚<br><br>å†™ä¸‹ä¸€å¥æƒ³å¯¹è‡ªå·±è¯´çš„å…¬å¹³è¯ï¼Œæ¯”å¦‚ï¼šâ€œé‚£æ—¶ï¼Œä½ å·²ç»å°½åŠ›äº†ã€‚â€" },
      { name: "å€’åŠäºº", symbol: "ğŸ™ƒ", fortuneLevel: 1, insight: "æš‚åœ", text: "çœ‹ä¼¼åœæ»ï¼Œå®åˆ™æ˜¯ä¸ºçœ‹æ¸…å…¨å±€ã€‚<br><br>æ¢ä¸ªè§’åº¦çœ‹é—®é¢˜ï¼Œç­”æ¡ˆè‡ªç„¶æµ®ç°ã€‚<br><br>èººä¸‹çœ‹å¤©èŠ±æ¿ï¼Œè®©æ€ç»ªè‡ªç”±é£˜ä¸€ä¼šå„¿ã€‚" },
      { name: "æ­»ç¥", symbol: "ğŸ’€", fortuneLevel: 0, insight: "æ–°ç”Ÿ", text: "ç»“æŸæ˜¯ä¸ºäº†è…¾å‡ºç©ºé—´ç»™æ›´å¥½çš„ã€‚<br><br>ä»Šæ—¥ï¼Œæ”¾ä¸‹ä¸€ä»¶æ—§åŒ…è¢±ï¼Œå“ªæ€•åªæ˜¯å¿ƒé‡Œçš„ä¸€å¥æ‰§å¿µã€‚<br><br>åœ¨çº¸ä¸Šå†™ä¸‹ä¸€ä¸ªæƒ³æ”¾ä¸‹çš„å¿µå¤´ï¼Œç„¶åæ’•ç¢ï¼ˆæˆ–å®‰å…¨åœ°çƒ§æ‰ï¼‰ï¼Œè®©é£å¸¦èµ°å®ƒã€‚" },
      { name: "èŠ‚åˆ¶", symbol: "ğŸ’§", fortuneLevel: 2, insight: "è°ƒå’Œ", text: "å¿«ä¸æ…¢ã€åŠ¨ä¸é™ï¼Œä»Šæ—¥éœ€è¦ä½ æ‰¾åˆ°ä¸­é—´ç‚¹ã€‚<br><br>èŠ‚å¥å¯¹äº†ï¼Œä¸€åˆ‡éƒ½ä¼šæµåŠ¨èµ·æ¥ã€‚<br><br>åšä¸€ä»¶äº‹æ—¶ï¼Œåˆ»æ„æ”¾æ…¢ä¸€åŠé€Ÿåº¦ï¼Œæ„Ÿå—å…¶ä¸­çš„éŸµå¾‹ã€‚" },
      { name: "æ¶é­”", symbol: "ğŸ‘¹", fortuneLevel: 0, insight: "é‡Šæ”¾", text: "ä½ è¢«ä»€ä¹ˆå›°ä½äº†ï¼Ÿå…¶å®ï¼Œé’¥åŒ™ä¸€ç›´åœ¨ä½ æ‰‹ä¸­ã€‚<br><br>æ‰¿è®¤å®ƒï¼Œå‘½åå®ƒï¼Œä½ å°±å·²å¼€å§‹è‡ªç”±ã€‚<br><br>è½»å£°è¯´å‡ºé‚£ä¸ªå›°æ‰°ä½ çš„è¯ï¼Œç„¶åæ·±å‘¼å¸ä¸‰æ¬¡ï¼Œæƒ³è±¡å®ƒéšå‘¼æ°”ç¦»å¼€ã€‚" },
      { name: "é«˜å¡”", symbol: "âš¡", fortuneLevel: 0, insight: "è§‰é†’", text: "çªå¦‚å…¶æ¥çš„å˜åŒ–ï¼Œå…¶å®åœ¨å¸®ä½ æ‰“ç ´å¹»è±¡ã€‚<br><br>åºŸå¢Ÿä¹‹ä¸‹ï¼Œè—ç€ä½ çœŸæ­£éœ€è¦çš„åŸºçŸ³ã€‚<br><br>æ‰¾å‡ºä»Šæ—¥ä»å®‰ç¨³å­˜åœ¨çš„ä¸‰ä»¶äº‹ï¼ˆå¦‚å‘¼å¸ã€é˜³å…‰ã€ä¸€æ¯æ°´ï¼‰ï¼Œæ„Ÿæ©å®ƒä»¬ã€‚" },
      { name: "æ˜Ÿæ˜Ÿ", symbol: "ğŸŒŸ", fortuneLevel: 3, insight: "å¸Œæœ›", text: "é»‘æš—ä¸­æœ‰å…‰ï¼Œè€Œä½ å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚<br><br>ä»Šæ—¥ï¼Œè¯·ç›¸ä¿¡ï¼šç¾å¥½æ­£åœ¨é è¿‘ï¼ŒåŒ…æ‹¬ä½ å†…å¿ƒçš„å¹³é™ã€‚<br><br>æŠ¬å¤´çœ‹å¤©ç©ºï¼ˆç™½å¤©æˆ–å¤œæ™šï¼‰ï¼Œé»˜å¿µï¼šâ€œæˆ‘å±äºè¿™æµ©ç€šï¼Œä¹Ÿè¢«å®ƒå®ˆæŠ¤ã€‚â€" },
      { name: "æœˆäº®", symbol: "ğŸŒ™", fortuneLevel: 1, insight: "ä¿¡ä»»", text: "æœ‰äº›äº‹æƒ…è¿˜ä¸æ¸…æ™°ï¼Œæ²¡å…³ç³»ã€‚<br><br>è·Ÿéšç›´è§‰èµ°ä¸€å°æ­¥ï¼Œé›¾å°±ä¼šæ•£å¼€ä¸€ç‚¹ã€‚<br><br>æŠŠæ‰‹æ”¾åœ¨è…¹éƒ¨ï¼Œé—®ï¼šâ€œä¸‹ä¸€æ­¥ï¼Œå¾€å“ªï¼Ÿâ€ ç„¶åè·Ÿéšç¬¬ä¸€ä¸ªå†²åŠ¨ã€‚" },
      { name: "å¤ªé˜³", symbol: "â˜€ï¸", fortuneLevel: 3, insight: "å–œæ‚¦", text: "ä»Šæ—¥å……æ»¡å…‰æ˜ä¸æ´»åŠ›ï¼å…è®¸è‡ªå·±å¼€å¿ƒï¼Œæ— éœ€ç†ç”±ã€‚<br><br>ä½ çš„ç¬‘å®¹ï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§ç–—æ„ˆã€‚<br><br>å¯¹ç€é•œå­å¾®ç¬‘5ç§’ï¼Œå“ªæ€•å‡è£…â€”â€”èº«ä½“ä¼šè®°ä½è¿™ä»½å…‰ã€‚" },
      { name: "å®¡åˆ¤", symbol: "ğŸ””", fortuneLevel: 2, insight: "é‡ç”Ÿ", text: "ä¸€ä¸ªæ–°ç¯‡ç« æ­£åœ¨å¼€å¯ã€‚ä½ å‡†å¤‡å¥½äº†ã€‚<br><br>è¿‡å»çš„ç»éªŒï¼Œå°†æˆä¸ºä½ æ–°ç”Ÿçš„ç¿…è†€ã€‚<br><br>å†™ä¸‹â€œæˆ‘å·²å‡†å¤‡å¥½è¿æ¥______â€ï¼Œå¡«ä¸Šä½ æœŸå¾…çš„æ–°å¼€å§‹ã€‚" },
      { name: "ä¸–ç•Œ", symbol: "ğŸŒ", fortuneLevel: 3, insight: "åœ†æ»¡", text: "ä»Šæ—¥ï¼Œä½ ç«™åœ¨ä¸€ä¸ªé˜¶æ®µçš„ç»ˆç‚¹ï¼Œä¹Ÿæ˜¯æ–°å¾ªç¯çš„èµ·ç‚¹ã€‚<br><br>ä½ åšå¾—å¾ˆå¥½ï¼ŒçœŸçš„å¾ˆå¥½ã€‚<br><br>åŒæ‰‹åˆåäºèƒ¸å‰ï¼Œè½»å£°è¯´ï¼šâ€œè°¢è°¢è¿™ä¸€ç¨‹çš„è‡ªå·±ã€‚â€" }
    ];

    const fortunePhrases = {
      3: ["âœ¨ å…‰èŠ’æ»¡æº¢ä¹‹æ—¥", "ğŸŒŸ å®‡å®™ä¸ä½ åŒé¢‘", "ğŸ’« å¿ƒæ„¿å…±æŒ¯æ—¶åˆ»", "ğŸŒ å†…åœ¨å¤ªé˜³å‡èµ·"],
      2: ["ğŸŒ¿ é¡ºæµè€Œè¡Œä¹‹æ—¥", "ğŸ•Šï¸ å¹³ç¨³ä¸­è§å¸Œæœ›", "ğŸ«¶ å°ç¡®å¹¸å°†è‡³", "ğŸƒ å¿ƒé™è‡ªç„¶æ˜æœ—"],
      1: ["ğŸ•¯ï¸ é™å¾…èŠ±å¼€ä¹‹æ—¥", "ğŸŒ«ï¸ è¿·é›¾ä¸­æœ‰å¾®å…‰", "ğŸŒ± æ ¹ç³»æ‚„ç„¶ç”Ÿé•¿", "ğŸŒŠ æ½œæµè“„åŠ›ä¹‹æ—¶"],
      0: ["ğŸŒ‘ æš—å¤„è‚²å…‰ä¹‹æ—¥", "ğŸª¨ é‡å»ºæ ¹åŸºä¹‹æ—¶", "ğŸŒ§ï¸ é›¨åè‡ªæœ‰è™¹"]
    };

    let firstCard = null;
    let secondCard = null;

    function startShuffle(stage) {
      let candidates = [];
      let used = new Set();
      while (candidates.length < 3) {
        let card = tarotCards[Math.floor(Math.random() * tarotCards.length)];
        if (!used.has(card.name)) {
          used.add(card.name);
          candidates.push(card);
        }
      }

      const containerId = stage === 'first' ? 'firstCards' : 'secondCards';
      const screenId = stage === 'first' ? 'firstDraw' : 'secondDraw';

      showScreen(screenId);

      const container = document.getElementById(containerId);
      container.innerHTML = '';
      candidates.forEach((card, index) => {
        const cardEl = document.createElement('div');
        cardEl.className = 'card-back';
        cardEl.onclick = (e) => {
          const rect = cardEl.getBoundingClientRect();
          const x = rect.left + rect.width / 2;
          const y = rect.top + rect.height / 2;
          createParticles(x, y);
          selectCard(card, stage);
        };
        container.appendChild(cardEl);
      });
    }

    function selectCard(card, stage) {
      if (stage === 'first') {
        firstCard = card;
        setTimeout(() => startShuffle('second'), 300);
      } else {
        secondCard = card;
        showResult();
      }
    }

    function getOverallFortune(l1, l2) {
      const maxL = Math.max(l1, l2);
      const minL = Math.min(l1, l2);
      let level = maxL === 3 ? 3 : (maxL === 2 ? 2 : (minL <= 0 && maxL <= 1 ? 0 : 1));
      const pool = fortunePhrases[level];
      return pool[Math.floor(Math.random() * pool.length)];
    }

    function generateCombinedMessage(card1, card2) {
      const messages = [
        `å½“ã€Œ${card1.insight}ã€é‡è§ã€Œ${card2.insight}ã€ï¼Œèƒ½é‡äº¤ç»‡æˆå…‰ï¼š<br>å¤–åœ¨è¡ŒåŠ¨ä¸å†…åœ¨èŠ‚å¥ï¼Œæ­£è¾¾æˆç¥åœ£å’Œè°ã€‚`,
        `ã€Œ${card1.insight}ã€ç‚¹ç‡ƒç«ç§ï¼Œã€Œ${card2.insight}ã€æŠ¤æŒå¾®å…‰ã€‚<br>ä»Šæ—¥ï¼Œä½ æ—¢æ˜¯æ—…äººï¼Œä¹Ÿæ˜¯å½’å¤„ã€‚`,
        `å¡”ç½—å€Ÿè¿™ä¸¤å¼ ç‰Œä½è¯­ï¼š<br>ä½ å·²è¢«çœ‹è§ï¼Œè¢«æ”¯æŒï¼Œè¢«æ·±æ·±ç¥ç¦ç€ã€‚`,
        `åˆšæŸ”å¹¶æµï¼ŒåŠ¨é™ç›¸ç”Ÿâ€”â€”<br>è¿™æ­£æ˜¯ä½ ä»Šæ—¥æœ€å¼ºå¤§çš„çŠ¶æ€ã€‚`,
        `ä¸å¿…è¿½é—®æ„ä¹‰ï¼Œ<br>ä½ æ­¤åˆ»çš„å­˜åœ¨ï¼Œå·²æ˜¯ç­”æ¡ˆã€‚`
      ];
      return messages[Math.floor(Math.random() * messages.length)];
    }

    function showResult() {
      const overall = getOverallFortune(firstCard.fortuneLevel, secondCard.fortuneLevel);
      const combinedGuidance = generateCombinedMessage(firstCard, secondCard);

      document.getElementById('overallFortune').textContent = overall;
      document.getElementById('mainCardText').innerHTML = `<strong>${firstCard.name}</strong><br>${firstCard.text}`;
      document.getElementById('supportCardText').innerHTML = `<strong>${secondCard.name}</strong><br>${secondCard.text}`;
      document.getElementById('combinedMessage').innerHTML = combinedGuidance;

      showScreen('combinedResult');
    }
  </script>
</body>
</html>
