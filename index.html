<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å¡”ç½—æ—¥è¿ Â· ä¸‰é‡æŒ‡å¼•</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Noto+Serif+SC:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Serif SC', serif;
      background: #1a0b2e url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'%3E%3Cpath d='M20,20 Q100,5 180,20 T180,180 M20,180 Q100,195 180,180' stroke='%233a2a4a' stroke-width='0.8' fill='none' opacity='0.15'/%3E%3Ccircle cx='100' cy='100' r='80' stroke='%234a355a' stroke-width='1' fill='none' opacity='0.1'/%3E%3C/svg%3E");
      color: #e8d8f0;
      line-height: 1.7;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      text-align: center;
      position: relative;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 560px;
      position: relative;
      z-index: 2;
    }

    .welcome-text,
    .instructions,
    .section-content,
    .combined-message,
    .share-prompt {
      text-align: left;
      word-break: keep-all;
      overflow-wrap: break-word;
      hyphens: none;
      orphans: 2;
      widows: 2;
      margin-left: auto;
      margin-right: auto;
    }

    h1,
    .result-title,
    .fortune-badge,
    .divider,
    button,
    .restart-link {
      text-align: center;
    }

    .result-title,
    .section-label {
      white-space: nowrap;
    }

    .screen {
      display: none;
      padding: 50px 30px;
      animation: fadeInBook 0.9s ease-out forwards;
    }

    .screen.active {
      display: block;
    }

    @keyframes fadeInBook {
      from { opacity: 0; transform: translateY(20px) scale(0.97); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.6em;
      margin-bottom: 25px;
      font-weight: 700;
      letter-spacing: 2px;
      color: #d4b77a;
      text-shadow: 0 0 12px rgba(160, 110, 100, 0.3);
      position: relative;
      white-space: nowrap;
    }

    h1::after {
      content: "";
      display: block;
      width: 60px;
      height: 2px;
      background: linear-gradient(to right, transparent, #c9a968, transparent);
      margin: 12px auto 0;
    }

    .welcome-text {
      margin: 28px auto;
      font-size: 1.1em;
      line-height: 1.85;
      color: #e0c9a8;
      max-width: 480px;
      min-width: 280px;
      padding: 0 10px;
    }

    .instructions {
      margin: 24px auto;
      font-size: 1.05em;
      color: #c9a968;
      font-style: italic;
      max-width: 460px;
      line-height: 1.6;
      text-align: center; /* å±…ä¸­ */
    }

    .cards-container {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-top: 40px;
      flex-wrap: wrap;
    }

    .card-back {
      width: 80px;
      height: 130px;
      background: linear-gradient(135deg, #2c1a4d, #1a0b2e);
      border: 2px solid #8a6a9a;
      border-radius: 10px;
      cursor: pointer;
      position: relative;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
      transition: all 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card-back::before {
      content: "ğŸ‚ ";
      font-size: 32px;
      color: #c9a968;
      opacity: 0.7;
    }

    .card-back:hover {
      transform: translateY(-8px) scale(1.05);
      border-color: #c9a968;
      box-shadow: 0 8px 18px rgba(201, 169, 104, 0.3);
      background: linear-gradient(135deg, #35225a, #22123a);
    }

    .third-draw .card-back {
      border-color: #d4b77a;
      background: linear-gradient(135deg, #2a1b45, #180a28);
    }
    .third-draw .card-back::before {
      content: "ğŸƒ";
      color: #e0c9a8;
    }
    .third-draw .card-back:hover {
      transform: translateY(-10px) scale(1.08);
      box-shadow: 0 10px 22px rgba(212, 183, 122, 0.4);
    }

    @media (max-width: 480px) {
      .card-back {
        width: 70px;
        height: 115px;
      }
    }

    .result-header {
      position: relative;
      margin-bottom: 30px;
    }

    .result-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.2em;
      color: #d4b77a;
      letter-spacing: 1.5px;
      margin-bottom: 8px;
    }

    .fortune-badge {
      display: inline-block;
      padding: 8px 24px;
      background: #25143d;
      border: 1px solid #8a6a9a;
      border-radius: 30px;
      font-size: 1.15em;
      color: #e0c9a8;
      font-weight: 600;
      letter-spacing: 1px;
      margin-top: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
    }

    .divider {
      height: 1px;
      background: linear-gradient(to right, transparent, #c9a968, transparent);
      margin: 28px auto;
      width: 80%;
    }

    .result-section {
      background: rgba(30, 18, 45, 0.7);
      border: 1px solid #5a4070;
      border-radius: 16px;
      padding: 24px;
      margin: 22px 0;
      text-align: left;
    }

    .section-label {
      font-size: 1.1em;
      color: #c9a968;
      margin-bottom: 12px;
      font-weight: 600;
      letter-spacing: 1px;
      text-align: left;
    }

    .section-content,
    .combined-message {
      font-size: 1.08em;
      line-height: 1.85;
      color: #e8d8f0;
      padding: 0 12px;
    }

    .section-content p,
    .combined-message p {
      margin: 0.8em 0;
      text-align: left;
    }

    .section-content strong {
      color: #d4b77a;
      font-weight: 600;
    }

    .card-name {
      display: block;
      font-weight: 600;
      color: #d4b77a;
      margin-bottom: 8px;
      font-size: 1.2em;
    }

    .combined-message {
      background: rgba(20, 10, 30, 0.85);
      border-left: 4px solid #c9a968;
      padding: 20px !important;
      margin: 28px 0;
      font-style: italic;
      color: #f0e0d0;
      border-radius: 0 10px 10px 0;
    }

    .share-prompt {
      margin-top: 35px;
      font-size: 1.1em;
      color: #d4b77a;
      font-style: italic;
      line-height: 1.5;
      padding: 12px;
      background: rgba(15, 8, 25, 0.6);
      border-radius: 10px;
      border: 1px dashed #5a4070;
      text-align: center; /* å±…ä¸­ */
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }

    button {
      margin: 32px auto 0;
      padding: 16px 0;
      width: 80%;
      background: linear-gradient(135deg, #5a4070, #25143d);
      color: #e8d8f0;
      border: 1px solid #8a6a9a;
      border-radius: 30px;
      font-size: 1.12em;
      cursor: pointer;
      transition: all 0.35s;
      font-family: 'Noto Serif SC', serif;
      letter-spacing: 1.2px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
      display: block;
    }

    button:hover:not(:disabled) {
      background: linear-gradient(135deg, #6a5080, #35244d);
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.6);
      border-color: #a080b0;
    }

    .restart-link {
      display: block;
      margin: 24px auto 0;
      color: #c9a968;
      text-decoration: none;
      font-size: 1.05em;
      font-style: italic;
      letter-spacing: 1px;
      width: fit-content;
      text-align: center;
    }

    .restart-link::after {
      content: "ï¼ˆæ¯æ—¥ä»…é™ä¸€æ¬¡ï¼‰";
      display: block;
      font-size: 0.9em;
      color: #5a4070;
      margin-top: 4px;
    }

    #particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #c9a968;
      border-radius: 50%;
      opacity: 0;
      pointer-events: none;
    }

    @media (max-width: 380px) {
      h1 {
        font-size: 2.2em;
      }
      .welcome-text {
        font-size: 1.05em;
        line-height: 1.8;
      }
      .section-content,
      .combined-message {
        font-size: 1em;
        line-height: 1.75;
        padding: 0 10px;
      }
      .result-title {
        font-size: 1.9em;
      }
      .section-label {
        white-space: normal;
        word-break: keep-all;
      }
    }
  </style>
</head>
<body>
  <div id="particles"></div>
  
  <div class="container">
    <div id="welcome" class="screen active">
      <h1>âœ¦ å¡”ç½—æ—¥è¿ Â· ä¸‰é‡æŒ‡å¼• âœ¦</h1>
      <div class="welcome-text">
        æ¬¢è¿ä½ æ¥åˆ°è¿™é‡Œã€‚<br><br>
        è¿™ä¸‰å¼ ç‰Œä¸æ˜¯é¢„è¨€ï¼Œè€Œæ˜¯æ˜ ç…§ä½ å†…å¿ƒçš„é•œå­â€”â€”å¸®åŠ©ä½ çœ‹è§è¡ŒåŠ¨çš„æ–¹å‘ã€æƒ…ç»ªçš„æš—æµï¼Œä»¥åŠå®‡å®™æ‚„æ‚„èµ äºˆçš„ç¥ç¦ã€‚<br><br>
        è¯·å¸¦ç€é™å¿ƒä¸è§‚ç…§æ¥å‚ä¸ï¼Œä½†è®°å¾—ï¼š<strong>çœŸæ­£çš„åŠ›é‡ï¼Œå§‹ç»ˆåœ¨ä½ å¿ƒä¸­ã€‚</strong><br><br>
        å¡”ç½—æ˜¯å·¥å…·ï¼Œä¸æ˜¯ç­”æ¡ˆã€‚æ„¿ä½ ç”¨å®ƒç…§è§è‡ªå·±ï¼Œè€Œéä¾èµ–å®ƒä»£æ›¿é€‰æ‹©ã€‚<br>
        æ¯æ—¥ä¸€æ¬¡ï¼Œå·²æ˜¯è¶³å¤Ÿã€‚
      </div>
      <button onclick="startStage('first')">å¼€å¯ä»Šæ—¥æŒ‡å¼•</button>
    </div>

    <div id="firstDraw" class="screen">
      <h1>ç¬¬ä¸€é‡&nbsp;Â·&nbsp;è¡ŒåŠ¨ä¹‹ç‰Œ</h1>
      <div class="instructions">å“ªä¸€å¼ åœ¨æŒ‡å¼•ä½ ä»Šæ—¥è¡ŒåŠ¨ï¼Ÿ</div>
      <div class="cards-container" id="firstCards"></div>
    </div>

    <div id="secondDraw" class="screen">
      <h1>ç¬¬äºŒé‡&nbsp;Â·&nbsp;å¿ƒçµä¹‹ç‰Œ</h1>
      <div class="instructions">å“ªä¸€å¼ æ˜ ç…§ä½ æ­¤åˆ»å†…å¿ƒï¼Ÿ</div>
      <div class="cards-container" id="secondCards"></div>
    </div>

    <div id="thirdDraw" class="screen third-draw">
      <h1>ç¬¬ä¸‰é‡&nbsp;Â·&nbsp;ç¥ç¦ä¹‹ç‰Œ</h1>
      <div class="instructions">å“ªä¸€å¼ æ­£ä¸ºä½ æ‚„ç„¶ç¥ç¦ï¼Ÿ</div>
      <div class="cards-container" id="thirdCards"></div>
    </div>

    <div id="combinedResult" class="screen">
      <div class="result-header">
        <div class="result-title">ä»Šæ—¥ä¸‰é‡æŒ‡å¼•</div>
        <div class="fortune-badge" id="overallFortune"></div>
      </div>

      <div class="result-section">
        <div class="section-label">ğŸš¶â€â™€ï¸ è¡ŒåŠ¨ä¹‹ç‰Œ Â· å¤–åœ¨è¯¾é¢˜</div>
        <div class="section-content" id="actionContent"></div>
      </div>

      <div class="result-section">
        <div class="section-label">ğŸŒŠ å¿ƒçµä¹‹ç‰Œ Â· å†…åœ¨çŠ¶æ€</div>
        <div class="section-content" id="emotionContent"></div>
      </div>

      <div class="result-section">
        <div class="section-label">âœ¨ ç¥ç¦ä¹‹ç‰Œ Â· é«˜ç»´é¦ˆèµ </div>
        <div class="section-content" id="blessingContent"></div>
      </div>

      <div class="divider"></div>

      <div class="combined-message" id="combinedMessage"></div>

      <div class="share-prompt">
        è‹¥è§¦åŠ¨ä½ ï¼Œæ„¿å®ƒä¹Ÿç…§äº®ä»–äººã€‚
      </div>

      <a href="#" class="restart-link" onclick="restart()">æ˜æ—¥å†æŠ½æ—¥è¿</a>
    </div>
  </div>

  <script>
    const tarotCards = [
      { 
        name: "æ„šè€…", 
        action: "è¿ˆå‡ºé‚£ä¸€æ­¥å‰ï¼Œä¸å¿…çœ‹æ¸…æ•´æ¡è·¯â€”â€”é£ä¼šæ‰˜ä½ä½ çš„è„šè·Ÿã€‚ä»Šå¤©é€‚åˆåšä¸€ä»¶â€œæ¯«æ— ç†ç”±ä½†è®©ä½ å¿ƒè·³åŠ å¿«â€çš„å°äº‹ï¼Œæ¯”å¦‚ç»™æ—§å‹å‘ä¸€å¥â€œçªç„¶æƒ³èµ·ä½ â€ã€‚ä½ å®³æ€•çš„â€œä¸æˆç†Ÿâ€ï¼Œæ°æ˜¯å®‡å®™æœ€çè§†çš„å¤©çœŸã€‚",
        emotion: "å†…å¿ƒæ¶ŒåŠ¨ç€ä¸€ç§è¿‘ä¹å­©ç«¥èˆ¬çš„ä¿¡ä»»ï¼Œä½†èƒŒåè—ç€å¯¹å¤±æ§çš„ææƒ§ã€‚å…è®¸è‡ªå·±æš‚æ—¶ä¸çŸ¥é“ç­”æ¡ˆï¼Œè¿™æœ¬èº«å°±æ˜¯ä¸€ç§æ™ºæ…§ã€‚",
        blessing: "å®‡å®™æ­£ä»¥åˆç”Ÿä¹‹çœ¼å‡è§†ä½ ï¼Œæ¯ä¸€æ¬¡å°è¯•éƒ½è¢«æ¸©æŸ”è®°å½•ã€‚ä½ ä¸éœ€è¦è¯æ˜ä»€ä¹ˆï¼Œå­˜åœ¨å³å€¼å¾—è¢«çˆ±ã€‚"
      },
      { 
        name: "é­”æœ¯å¸ˆ", 
        action: "æ­¤åˆ»ä½ æ‰‹è¾¹çš„æ¯ä¸€æ ·ä¸œè¥¿â€”â€”æ—¶é—´ã€è¯è¯­ã€ä¸€ä¸ªå¿µå¤´â€”â€”éƒ½æ˜¯é­”æ³•çš„åŸæ–™ã€‚é€‰ä¸€ä»¶å°äº‹ï¼Œå…¨ç¥è´¯æ³¨åœ°å®Œæˆå®ƒï¼Œè®©èƒ½é‡èšç„¦æˆå½¢ã€‚",
        emotion: "ä½ æ¯”æƒ³è±¡ä¸­æ›´æœ‰åˆ›é€ åŠ›ï¼Œåªæ˜¯å¸¸æŠŠâ€œä¸å¤Ÿå®Œç¾â€å½“ä½œåœä¸‹çš„å€Ÿå£ã€‚çœŸæ­£çš„é­”æ³•å§‹äºè¡ŒåŠ¨ï¼Œè€Œéå‡†å¤‡ã€‚",
        blessing: "å¤©åœ°é—´çš„èµ„æºæ­£æ‚„ç„¶å‘ä½ å€¾æ–œï¼Œåªè¦ä½ å¼€å£è¯·æ±‚ï¼Œæˆ–ä»…ä»…æ˜¯æ¸…æ™°åœ°æƒ³è¦ã€‚"
      },
      { 
        name: "å¥³ç¥­å¸", 
        action: "æš‚åœå‘å¤–å¯»æ‰¾ç­”æ¡ˆã€‚ä»Šæ™šå…³ç¯é™åä¸‰åˆ†é’Ÿï¼Œé—®è‡ªå·±ï¼šâ€œæˆ‘çœŸæ­£çŸ¥é“çš„æ˜¯ä»€ä¹ˆï¼Ÿâ€ ç­”æ¡ˆä¸åœ¨å¤´è„‘é‡Œï¼Œåœ¨èº«ä½“æ·±å¤„ã€‚",
        emotion: "æœ‰äº›æƒ…ç»ªä½ ä¸æ•¢å‘½åï¼Œå› ä¸ºä¸€æ—¦è¯´å‡ºï¼Œç°å®å°±ä¼šæ”¹å˜ã€‚ä½†æ²‰é»˜çš„ç›´è§‰æ¯”å–§åš£çš„é€»è¾‘æ›´æ¥è¿‘çœŸç›¸ã€‚",
        blessing: "æœˆå…‰å·²ä¸ºä½ é“ºå¥½ç§˜å¾„ï¼Œé‚£äº›æœªè¢«è¨€è¯´çš„ç§˜å¯†ï¼Œç»ˆå°†æˆä¸ºä½ ç‹¬æœ‰çš„åŠ›é‡æºæ³‰ã€‚"
      },
      { 
        name: "çš‡å", 
        action: "ä¸ºè‡ªå·±å‡†å¤‡ä¸€é¡¿ç”¨å¿ƒçš„é¤é£Ÿï¼Œå“ªæ€•åªæ˜¯ä¸€ç¢—çƒ­æ±¤ã€‚æ»‹å…»ä¸æ˜¯å¥¢ä¾ˆï¼Œæ˜¯ä½ ä¸å¤§åœ°ç­¾è®¢çš„æ¸©æŸ”å¥‘çº¦ã€‚",
        emotion: "ä½ æ¸´æœ›è¢«ç…§é¡¾ï¼Œå´æ€»å…ˆå»ç…§é¡¾ä»–äººã€‚ä»Šå¤©ï¼Œè¯·æŠŠé‚£ä»½æ¸©æŸ”å…ˆç•™ç»™è‡ªå·±â€”â€”ä½ å€¼å¾—è¢«ä¸°ç››åŒ…å›´ã€‚",
        blessing: "èŠ±å›­æ­£åœ¨ä½ ä½“å†…ç»½æ”¾ï¼Œæ¯ä¸€æœµèŠ±éƒ½æ˜¯ä½ æ›¾ç»™äºˆä¸–ç•Œçš„çˆ±ï¼Œå¦‚ä»Šå›æµæˆå…»åˆ†ã€‚"
      },
      { 
        name: "çš‡å¸", 
        action: "è®¾å®šä¸€ä¸ªæ¸…æ™°çš„å°è¾¹ç•Œï¼Œæ¯”å¦‚â€œä¸‹åˆä¸‰ç‚¹å‰ä¸å›å·¥ä½œæ¶ˆæ¯â€ã€‚ç§©åºä¸æ˜¯æŸç¼šï¼Œè€Œæ˜¯ä½ ä¸ºè‡ªå·±æ­å»ºçš„å®‰å…¨å±‹ã€‚",
        emotion: "ä½ è¯•å›¾æŒæ§ä¸€åˆ‡ï¼Œæ˜¯å› ä¸ºå®³æ€•å¤±æ§å¸¦æ¥ä¼¤å®³ã€‚ä½†çœŸæ­£çš„ç¨³å®šï¼Œæ¥è‡ªå†…åœ¨çš„åšå®šï¼Œè€Œéå¤–åœ¨çš„æ§åˆ¶ã€‚",
        blessing: "å±±å²³èˆ¬çš„ç¨³å®šèƒ½é‡æ­£ä»åœ°å¿ƒå‡èµ·ï¼Œæ”¯æ’‘ä½ æˆä¸ºè‡ªå·±ç‹å›½çš„ä»æ…ˆå›ä¸»ã€‚"
      },
      { 
        name: "æ•™çš‡", 
        action: "é‡è¯»ä¸€æ®µæ›¾æ·±æ·±è§¦åŠ¨ä½ çš„æ–‡å­—ï¼Œæˆ–è”ç³»ä¸€ä½ä½ æ•¬é‡çš„é•¿è€…ã€‚æ™ºæ…§å¸¸ä»¥æ—§å½¢å¼ï¼Œä¼ é€’æ–°å¯ç¤ºã€‚",
        emotion: "ä½ åœ¨å¯»æ±‚å½’å±ï¼Œä½†çœŸæ­£çš„ä¿¡ä»°å§‹äºå¿ äºè‡ªå·±çš„èŠ‚å¥ï¼Œè€Œéè¿åˆä»–äººçš„æœŸå¾…ã€‚",
        blessing: "å¤è€çš„å£°éŸ³æ­£ç©¿è¶Šæ—¶ç©ºä½è¯­ï¼šä½ èµ°çš„è·¯ï¼Œæ—©æœ‰äººä¸ºä½ ç‚¹è¿‡ç¯ã€‚"
      },
      { 
        name: "æ‹äºº", 
        action: "åšä¸€æ¬¡åªå¿ äºå†…å¿ƒçš„é€‰æ‹©ï¼Œå“ªæ€•æ— äººç†è§£ã€‚å¯ä»¥æ˜¯ç©¿ä¸€ä»¶ä¹…è¿çš„è¡£æœï¼Œæˆ–æ‹’ç»ä¸€ä¸ªå‹‰å¼ºçš„é‚€çº¦ã€‚",
        emotion: "å…³ç³»ä¸­çš„æ‹‰æ‰¯ï¼Œå¾€å¾€æºäºä½ ä¸è‡ªå·±çš„åˆ†è£‚ã€‚å½“ä½ å®Œæ•´ï¼Œè¿æ¥è‡ªç„¶å’Œè°ã€‚",
        blessing: "å®‡å®™æ­£ä»¥çˆ±çš„é¢‘ç‡å…±æŒ¯ï¼Œæ‰€æœ‰çœŸè¯šçš„é€‰æ‹©ï¼Œéƒ½ä¼šå¸å¼•åŒé¢‘çš„å›åº”ã€‚"
      },
      { 
        name: "æˆ˜è½¦", 
        action: "é¢å¯¹ä¸¤ä¸ªçŸ›ç›¾çš„æ„¿æœ›æ—¶ï¼Œåˆ«æ€¥ç€é€‰è¾¹ã€‚å…ˆæ‰¿è®¤å®ƒä»¬éƒ½çœŸå®å­˜åœ¨ï¼Œç„¶åé—®ï¼šâ€œå“ªä¸ªæ›´è´´è¿‘æˆ‘æ­¤åˆ»çš„ç”Ÿå‘½æ–¹å‘ï¼Ÿâ€",
        emotion: "ä½ ä½“å†…æœ‰ä¸¤è‚¡åŠ›é‡åœ¨æ‹‰æ‰¯ï¼Œä½†é©¾é©­å®ƒä»¬çš„ç¼°ç»³ï¼Œå§‹ç»ˆåœ¨ä½ æ‰‹ä¸­ã€‚èƒœåˆ©å±äºä¸æ”¾å¼ƒä»»ä½•ä¸€éƒ¨åˆ†è‡ªå·±çš„äººã€‚",
        blessing: "æ˜Ÿè¾°å·²ä¸ºä½ æ ¡å‡†æ–¹å‘ï¼Œå†²çªä¸æ˜¯éšœç¢ï¼Œè€Œæ˜¯æ•´åˆçš„é‚€è¯·å‡½ã€‚"
      },
      { 
        name: "åŠ›é‡", 
        action: "å½“æ„Ÿåˆ°æ„¤æ€’æˆ–æ— åŠ›æ—¶ï¼ŒæŠŠæ‰‹æ”¾åœ¨å¿ƒå£ï¼Œæ·±å‘¼å¸ä¸‰æ¬¡ï¼Œå¯¹è‡ªå·±è¯´ï¼šâ€œæˆ‘é€‰æ‹©æ¸©æŸ”ï¼Œè€Œéæ§åˆ¶ã€‚â€",
        emotion: "çœŸæ­£çš„å‹‡æ°”ä¸æ˜¯å‹åˆ¶æƒ…ç»ªï¼Œè€Œæ˜¯å¸¦ç€è„†å¼±ä¾ç„¶å‰è¡Œã€‚ä½ çš„æŸ”è½¯ï¼Œæ¯”åšç¡¬æ›´æœ‰ç©¿é€åŠ›ã€‚",
        blessing: "ç‹®å­æ­£å®‰é™ä¼åœ¨ä½ è„šè¾¹â€”â€”å®ƒè®¤å‡ºä½ çµé­‚æ·±å¤„çš„ç‹è€…ä¹‹æ¯ã€‚"
      },
      { 
        name: "éšå£«", 
        action: "ç»™è‡ªå·±ä¸€å°æ—¶â€œç¥åœ£ç‹¬å¤„â€ï¼šå…³æ‰é€šçŸ¥ï¼Œç‚¹ä¸€æ”¯èœ¡çƒ›ï¼Œå†™ä¸‹ä¸€ä¸ªä½ ä»æœªå‘Šè¯‰åˆ«äººçš„é—®é¢˜ã€‚",
        emotion: "å­¤ç‹¬æ„Ÿå¹¶éç©ºæ´ï¼Œè€Œæ˜¯çµé­‚åœ¨æ¸…ç†ç©ºé—´ï¼Œä¸ºæ›´æ·±çš„æ™ºæ…§è…¾å‡ºä½ç½®ã€‚é»‘æš—ä¸­æœ‰å…‰ï¼Œåªæ˜¯ä½ è¿˜æ²¡é€‚åº”å®ƒçš„çœ¼ç›ã€‚",
        blessing: "æç¯è€…ä»ä¸å­¤å•ï¼Œå› ä¸ºå…‰æœ¬èº«å°±æ˜¯åŒä¼´ã€‚ä½ çš„å†…çœï¼Œæ­£åœ¨ç…§äº®åæ¥è€…çš„è·¯ã€‚"
      },
      { 
        name: "å‘½è¿ä¹‹è½®", 
        action: "ç•™æ„ä»Šå¤©å‡ºç°çš„â€œå·§åˆâ€â€”â€”é”™è¿‡çš„è½¦ã€çªç„¶çš„æ¥ç”µã€é‡å¤çš„æ•°å­—ã€‚å®ƒä»¬ä¸æ˜¯å¶ç„¶ï¼Œæ˜¯å®‡å®™åœ¨è°ƒæ•´ä½ çš„èˆªå‘ã€‚",
        emotion: "å˜åŒ–è®©ä½ ä¸å®‰ï¼Œä½†è½®è½¬çš„æœ¬è´¨ä¸æ˜¯å¤±å»ï¼Œè€Œæ˜¯è®©ä¸é€‚åˆçš„ç¦»å¼€ï¼Œä¸ºæ›´é€‚åˆçš„è…¾å‡ºä½ç½®ã€‚",
        blessing: "å¥½è¿çš„é½¿è½®å·²å¼€å§‹è½¬åŠ¨ï¼Œä½ åªéœ€ä¿æŒå¼€æ”¾ï¼Œè€Œéç”¨åŠ›æ¨åŠ¨ã€‚"
      },
      { 
        name: "æ­£ä¹‰", 
        action: "å®¡è§†ä¸€ä¸ªæ‚¬è€Œæœªå†³çš„å†³å®šï¼Œé—®è‡ªå·±ï¼šâ€œå¦‚æœå‰¥ç¦»æ‰€æœ‰æƒ…ç»ªï¼Œäº‹å®æ˜¯ä»€ä¹ˆï¼Ÿâ€ ç„¶åï¼Œè¯šå®é¢å¯¹ç­”æ¡ˆã€‚",
        emotion: "ä½ æ¸´æœ›å…¬å¹³ï¼Œä½†çœŸæ­£çš„å¹³è¡¡å§‹äºå¯¹è‡ªå·±è¯šå®ã€‚é€ƒé¿çœŸç›¸ï¼Œåªä¼šå»¶é•¿ç—›è‹¦ã€‚",
        blessing: "å¤©å¹³ä¸¤ç«¯ç»ˆå°†å½’é›¶ï¼Œä½ æ‰€ç»å†çš„æ¯ä¸€ä»½å¤±è¡¡ï¼Œéƒ½åœ¨æ ¡å‡†çµé­‚çš„ç²¾å‡†åº¦ã€‚"
      },
      { 
        name: "å€’åŠäºº", 
        action: "ä¸»åŠ¨æš‚åœä¸€ä»¶ä½ æ€¥äºæ¨è¿›çš„äº‹ã€‚ä¸æ˜¯æ”¾å¼ƒï¼Œè€Œæ˜¯æ¢ä¸ªè§’åº¦è§‚å¯Ÿâ€”â€”æœ‰æ—¶åé€€ä¸€æ­¥ï¼Œæ‰èƒ½çœ‹è§å…¨æ™¯ã€‚",
        emotion: "ç‰ºç‰²æ„Ÿè®©ä½ ç–²æƒ«ï¼Œä½†è‡ªæ„¿çš„æš‚åœä¸æ˜¯æŸå¤±ï¼Œè€Œæ˜¯ä¸ºè·ƒå‡ç§¯è“„åŠ¿èƒ½ã€‚ä½ æŒ‚åœ¨é‚£é‡Œï¼Œæ˜¯ä¸ºäº†çœ‹æ¸…åœ°é¢ä¹‹å¤–çš„å¤©ç©ºã€‚",
        blessing: "å€’ç½®çš„ä¸–ç•Œé‡Œï¼Œä½ åè€Œçœ‹å¾—æœ€æ¸…ã€‚è¿™ä»½â€œæ‚¬åœâ€ï¼Œæ˜¯å®‡å®™èµäºˆçš„çè´µè§†è§’ã€‚"
      },
      { 
        name: "æ­»ç¥", 
        action: "å†™ä¸‹ä¸€ä»¶ä½ æ˜çŸ¥è¯¥ç»“æŸå´æ‹–å»¶çš„äº‹ï¼Œç„¶åæ’•ç¢å®ƒã€‚ä»ªå¼æ„Ÿä¸æ˜¯è¿·ä¿¡ï¼Œæ˜¯å‘æ½œæ„è¯†å®£å‘Šï¼šæˆ‘å‡†å¤‡å¥½äº†ã€‚",
        emotion: "å‘Šåˆ«å¸¦æ¥å“€ä¼¤ï¼Œä½†æ­»äº¡åªæ˜¯å½¢æ€çš„è½¬æ¢ã€‚ä½ æ”¾ä¸‹çš„å£³ï¼Œå°†æˆä¸ºæ–°ç”Ÿçš„åœŸå£¤ã€‚",
        blessing: "å‡¤å‡°çš„ç°çƒ¬é‡Œè—ç€é‡‘ç§â€”â€”ä½ ç»å†çš„æ¯ä¸€æ¬¡â€œæ­»å»â€ï¼Œéƒ½åœ¨ä¸ºé‡ç”Ÿç¼–ç ã€‚"
      },
      { 
        name: "èŠ‚åˆ¶", 
        action: "æ··åˆä¸¤ç§å¯¹ç«‹çš„ä¸œè¥¿ï¼šæ¯”å¦‚åœ¨å’–å•¡é‡ŒåŠ ä¸€ç‚¹ç›ï¼Œæˆ–åœ¨ä¸¥è‚ƒè®¡åˆ’ä¸­ç•™å‡ºç©ºç™½ã€‚å’Œè°ç”Ÿäºäº¤èï¼Œè€Œééš”ç¦»ã€‚",
        emotion: "ä½ ä¹ æƒ¯éé»‘å³ç™½ï¼Œä½†ç”Ÿå‘½æœ€ç¾çš„è‰²å½©ï¼Œè¯ç”Ÿäºç°è‰²åœ°å¸¦ã€‚å…è®¸è‡ªå·±åŒæ—¶æŒæœ‰çŸ›ç›¾ï¼Œè€Œä¸æ€¥äºè§£å†³ã€‚",
        blessing: "å¤©ä½¿æ­£å°†ä½ çš„æ³ªæ°´ä¸æ¬¢ç¬‘è°ƒå’Œæˆåœ£æ°´â€”â€”ä¸¤è€…éƒ½æ˜¯ä½ å®Œæ•´çš„å¿…éœ€å“ã€‚"
      },
      { 
        name: "æ¶é­”", 
        action: "è¯†åˆ«ä¸€ä¸ªä½ åå¤é™·å…¥çš„æ¨¡å¼ï¼ˆæ¯”å¦‚ç†¬å¤œã€è‡ªæˆ‘æ‰¹è¯„ï¼‰ï¼Œä»Šå¤©åªåšä¸€ä»¶äº‹ï¼šè§‰å¯Ÿå®ƒï¼Œè€Œä¸è¯„åˆ¤è‡ªå·±ã€‚",
        emotion: "ä½ ä»¥ä¸ºçš„â€œè‡ªç”±â€ï¼Œå¯èƒ½æ˜¯éšå½¢çš„é”é“¾ã€‚ä½†çœ‹æ¸…é“¾æ¡çš„é‚£ä¸€åˆ»ï¼Œé’¥åŒ™å·²åœ¨ä½ æŒå¿ƒã€‚",
        blessing: "é˜´å½±ä¸æ˜¯æ•Œäººï¼Œè€Œæ˜¯è¢«é—å¿˜çš„è‡ªå·±ã€‚æ‹¥æŠ±å®ƒï¼Œä½ ä¾¿å¤ºå›å…¨éƒ¨åŠ›é‡ã€‚"
      },
      { 
        name: "é«˜å¡”", 
        action: "å½“æ„å¤–å‘ç”Ÿæ—¶ï¼Œå…ˆæ·±å‘¼å¸åç§’ï¼Œå†è¡ŒåŠ¨ã€‚å´©å¡Œä¸æ˜¯æƒ©ç½šï¼Œè€Œæ˜¯ç³»ç»Ÿåœ¨å¼ºåˆ¶å‡çº§ã€‚",
        emotion: "éœ‡æƒŠä¹‹ä¸‹è—ç€è§£è„±â€”â€”é‚£äº›ä½ ä»¥ä¸ºå¿…é¡»å®ˆæŠ¤çš„ï¼Œæˆ–è®¸æ—©å·²ä¸å†å±äºä½ ã€‚åºŸå¢Ÿä¹‹ä¸Šï¼Œæ‰æœ‰æ–°å»ºç­‘çš„ç©ºé—´ã€‚",
        blessing: "é—ªç”µåŠˆå¼€è™šå‡çš„å±‹é¡¶ï¼Œåªä¸ºè®©çœŸå®çš„æ˜Ÿå…‰ç…§è¿›ä½ çš„çœ¼ç›ã€‚"
      },
      { 
        name: "æ˜Ÿæ˜Ÿ", 
        action: "ç¡å‰å†™ä¸‹ä¸‰ä¸ªå¾®å°æ„¿æœ›ï¼Œä¸å¿…å®å¤§ï¼Œæ¯”å¦‚â€œæ˜å¤©é˜³å…‰æ­£å¥½â€ã€‚å¸Œæœ›ä¸æ˜¯å¹»æƒ³ï¼Œè€Œæ˜¯å¯¹æœªæ¥çš„æ¸©æŸ”é¢„çº¦ã€‚",
        emotion: "å³ä½¿ä¸–ç•Œç°æš—ï¼Œä½ å¿ƒä¸­ä»æœ‰å…‰ç‚¹æœªç­ã€‚ä¿¡ä»»å®ƒï¼Œå“ªæ€•å¾®å¼±ï¼Œä¹Ÿè¶³ä»¥å¯¼èˆªé»‘å¤œã€‚",
        blessing: "å®‡å®™æ­£ä»¥æ˜Ÿå…‰ä¸ºä½ ç»‡æ¯¯ï¼Œæ¯ä¸€é¢—é—ªçƒï¼Œéƒ½æ˜¯å¯¹ä½ ä¿¡å¿µçš„å›åº”ã€‚"
      },
      { 
        name: "æœˆäº®", 
        action: "è®°å½•ä¸€ä¸ªåå¤å‡ºç°çš„æ¢¦å¢ƒæˆ–å¿µå¤´ï¼Œä¸åˆ†æï¼Œåªè§‚å¯Ÿã€‚æ½œæ„è¯†æ­£ç”¨éšå–»å‘ä½ ä¼ é€’åœ°å›¾ã€‚",
        emotion: "ææƒ§å¸¸æŠ«ç€â€œç°å®â€çš„å¤–è¡£ï¼Œä½†æ½®æ±ä¼šé€€å»ï¼Œéœ²å‡ºçœŸå®çš„æµ·å²¸ã€‚ä½ ä¸éœ€è¦ç«‹åˆ»çœ‹æ¸…ï¼Œåªéœ€ä¸è½¬èº«é€ƒè·‘ã€‚",
        blessing: "è¿·é›¾æ˜¯è¯•ç‚¼ï¼Œä¹Ÿæ˜¯ä¿æŠ¤ã€‚å½“ä½ ç©¿è¶Šå®ƒï¼Œå¸¦å›çš„ä¸æ˜¯ç­”æ¡ˆï¼Œè€Œæ˜¯æ›´æ·±çš„ä¿¡ä»»ã€‚"
      },
      { 
        name: "å¤ªé˜³", 
        action: "èµ°åˆ°æˆ·å¤–ï¼Œè®©é˜³å…‰ç…§åœ¨è„¸ä¸Šè‡³å°‘äº”åˆ†é’Ÿã€‚å…‰æ˜ä¸ä»…æ˜¯èƒ½é‡ï¼Œæ›´æ˜¯å¯¹ä½ å­˜åœ¨çš„è‚¯å®šã€‚",
        emotion: "å–œæ‚¦å¦‚æ­¤ç®€å•ï¼Œå´å¸¸è¢«ä½ å¿½ç•¥ã€‚ä»Šå¤©ï¼Œè¯·å…è®¸è‡ªå·±æ¯«æ— ç†ç”±åœ°å¼€å¿ƒâ€”â€”è¿™æœ¬èº«å°±æ˜¯ä¸€ç§ç¥åœ£ã€‚",
        blessing: "å¤ªé˜³ä»ä¸æ€€ç–‘è‡ªå·±æ˜¯å¦å€¼å¾—å‡èµ·ï¼Œä½ ä¹Ÿä¸€æ ·ã€‚ä½ çš„å…‰èŠ’ï¼Œæœ¬å°±ä¸éœ€è®¸å¯ã€‚"
      },
      { 
        name: "å®¡åˆ¤", 
        action: "é—®è‡ªå·±ï¼šâ€œå¦‚æœæ­¤åˆ»æ˜¯äººç”Ÿç»ˆç‚¹ï¼Œæˆ‘ä¼šåæ‚”æ²¡åšä»€ä¹ˆï¼Ÿâ€ ç„¶åï¼Œåšé‚£ä»¶æœ€å°çš„äº‹æ¥å›åº”ã€‚",
        emotion: "å¬å”¤å£°å·²åœ¨å†…å¿ƒå“èµ·ï¼Œé€ƒé¿åªä¼šè®©å›å“æ›´åˆºè€³ã€‚è§‰é†’ä¸æ˜¯é¡¿æ‚Ÿï¼Œè€Œæ˜¯æ¯å¤©é€‰æ‹©å¿ äºçœŸæˆ‘ã€‚",
        blessing: "å·è§’å¹å“ï¼Œä¸æ˜¯ä¸ºäº†å®¡åˆ¤è¿‡å»ï¼Œè€Œæ˜¯é‚€è¯·ä½ ä»¥å…¨æ–°èº«ä»½ï¼Œè¸å…¥ä¸‹ä¸€ç« ã€‚"
      },
      { 
        name: "ä¸–ç•Œ", 
        action: "åº†ç¥ä¸€ä»¶ä½ å®Œæˆçš„å°äº‹ï¼Œå“ªæ€•åªæ˜¯æ•´ç†äº†ä¹¦æ¡Œã€‚åœ†æ»¡ä¸åœ¨è¿œæ–¹ï¼Œå°±åœ¨æ­¤åˆ»ä½ æ‰‹ä¸­çš„æˆæœé‡Œã€‚",
        emotion: "ä½ æ€»æƒ³ç€â€œä¸‹ä¸€æ­¥â€ï¼Œå´å¿˜äº†ç¯é¡¾å·²å®Œæˆçš„æ—…ç¨‹ã€‚åœä¸‹ï¼Œé èº¬ï¼Œæ„Ÿè°¢è¿™ä¸€åœˆçš„è‡ªå·±ã€‚",
        blessing: "èˆè€…å·²ç«™åœ¨åœ†å¿ƒâ€”â€”ä½ èµ°è¿‡çš„æ¯ä¸€æ­¥ï¼Œéƒ½ç¼–ç»‡æˆäº†æ­¤åˆ»çš„æ¡‚å† ã€‚"
      }
    ];

    let selections = {};

    function startStage(stage) {
      hideAllScreens();
      document.getElementById(stage + 'Draw').classList.add('active');
      renderCards(stage);
    }

    function hideAllScreens() {
      document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
    }

    function shuffleArray(array) {
      return [...array].sort(() => Math.random() - 0.5);
    }

    function renderCards(stage) {
      const container = document.getElementById(stage + 'Cards');
      container.innerHTML = '';
      const shuffled = shuffleArray(tarotCards).slice(0, 3);
      shuffled.forEach(card => {
        const cardEl = document.createElement('div');
        cardEl.className = 'card-back';
        cardEl.onclick = () => selectCard(stage, card);
        container.appendChild(cardEl);
      });
    }

    function selectCard(stage, card) {
      selections[stage] = card;
      if (stage === 'first') {
        startStage('second');
      } else if (stage === 'second') {
        startStage('third');
      } else if (stage === 'third') {
        showResult();
      }
    }

    function preventOrphans(str) {
      return str.replace(/(\S+)\s+(\S+)$/g, '$1&nbsp;$2');
    }

    function showResult() {
      const action = selections.first;
      const emotion = selections.second;
      const blessing = selections.third;

      const positiveCards = ['é­”æœ¯å¸ˆ','çš‡å','æ‹äºº','æˆ˜è½¦','åŠ›é‡','å‘½è¿ä¹‹è½®','èŠ‚åˆ¶','æ˜Ÿæ˜Ÿ','å¤ªé˜³','ä¸–ç•Œ'];
      const count = [action, emotion, blessing].filter(c => positiveCards.includes(c.name)).length;
      let fortuneText = count >= 2 ? 'å‰æ˜Ÿé«˜ç…§ ğŸŒŸ' : count === 1 ? 'ç¨³ä¸­æœ‰è¿› âš–ï¸' : 'é™å¾…è½¬æœº ğŸŒ±';

      document.getElementById('overallFortune').textContent = fortuneText;

      document.getElementById('actionContent').innerHTML = `<span class="card-name">${action.name}</span><p>${preventOrphans(action.action)}</p>`;
      document.getElementById('emotionContent').innerHTML = `<span class="card-name">${emotion.name}</span><p>${preventOrphans(emotion.emotion)}</p>`;
      document.getElementById('blessingContent').innerHTML = `<span class="card-name">${blessing.name}</span><p>${preventOrphans(blessing.blessing)}</p>`;

      const combined = `ä»Šæ—¥ï¼Œ${action.name}å¼•é¢†ä½ è¡ŒåŠ¨ï¼Œ${emotion.name}æ˜ ç…§ä½ å†…å¿ƒï¼Œè€Œ${blessing.name}ä¸ºä½ åŠ å†•ã€‚ä¸‰è€…äº¤ç»‡ï¼Œå½¢æˆç‹¬ç‰¹èƒ½é‡åœºï¼šå¤–åœ¨éœ€${action.name === 'éšå£«' || action.name === 'å€’åŠäºº' ? 'å†…çœ' : 'å‰è¡Œ'}ï¼Œå†…åœ¨å®œ${emotion.name === 'åŠ›é‡' || emotion.name === 'å¤ªé˜³' ? 'åšå®š' : 'æµåŠ¨'}ï¼Œå®‡å®™æ­£ä»¥${blessing.name}çš„æ–¹å¼é»˜é»˜æŠ¤æŒä½ ã€‚`;
      document.getElementById('combinedMessage').innerHTML = `<p>${preventOrphans(combined)}</p>`;

      hideAllScreens();
      document.getElementById('combinedResult').classList.add('active');
    }

    function restart() {
      // ä¸é‡ç½®ï¼Œä»…æç¤ºæ˜æ—¥å†æ¥
      alert('ä»Šæ—¥å·²æŠ½å–ï¼Œæ˜æ—¥å†æŠ½æ—¥è¿ã€‚\nå¡”ç½—æ—¥è¿æ¯æ—¥é™ä¸€æ¬¡ï¼Œé™å¾…æ—¶å…‰æµè½¬ã€‚');
    }

    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      for (let i = 0; i < 50; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.left = Math.random() * 100 + '%';
        p.style.top = Math.random() * 100 + '%';
        p.style.opacity = Math.random() * 0.6 + 0.1;
        p.style.width = (Math.random() * 3 + 2) + 'px';
        p.style.height = p.style.width;
        particlesContainer.appendChild(p);

        const duration = Math.random() * 10 + 10;
        p.animate([
          { transform: 'translate(0, 0)', opacity: 0 },
          { transform: `translate(${(Math.random() - 0.5) * 100}px, ${(Math.random() - 0.5) * 100}px)`, opacity: 0.6 },
          { transform: `translate(${(Math.random() - 0.5) * 200}px, ${(Math.random() - 0.5) * 200}px)`, opacity: 0 }
        ], {
          duration: duration * 1000,
          iterations: Infinity,
          easing: 'linear'
        });
      }
    }

    window.onload = () => {
      createParticles();
    };
  </script>
</body>
</html>
